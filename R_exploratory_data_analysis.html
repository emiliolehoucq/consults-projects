<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emilio Lehoucq">

<title>Exploring and cleaning data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="1_exploring_and_cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="1_exploring_and_cleaning_files/libs/quarto-html/quarto.js"></script>
<script src="1_exploring_and_cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="1_exploring_and_cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="1_exploring_and_cleaning_files/libs/quarto-html/anchor.min.js"></script>
<link href="1_exploring_and_cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="1_exploring_and_cleaning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="1_exploring_and_cleaning_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="1_exploring_and_cleaning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="1_exploring_and_cleaning_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Exploring and cleaning data</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Emilio Lehoucq </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="importing-libraries" class="level1">
<h1>Importing libraries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
</section>
<section id="reading-the-data" class="level1">
<h1>Reading the data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"../data/un_migrant_stock/raw/undesa_pd_2020_ims_stock_by_sex_destination_and_origin.csv"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_select =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span><span class="sc">:</span><span class="dv">14</span>),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">na =</span> <span class="st">".."</span>, <span class="co"># From the Notes tab: "Two dots (..) indicate that data are not available or are not reported separately"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">skip =</span> <span class="dv">10</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 37051 Columns: 12
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(9): Region, development group, country or area of destination, Region, ... dbl
(3): Index, Location code of destination, Location code of origin
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `1990` -&gt; `1990...8`
• `1995` -&gt; `1995...9`
• `2000` -&gt; `2000...10`
• `2005` -&gt; `2005...11`
• `2010` -&gt; `2010...12`
• `2015` -&gt; `2015...13`
• `2020` -&gt; `2020...14`
• `1990` -&gt; `1990...15`
• `1995` -&gt; `1995...16`
• `2000` -&gt; `2000...17`
• `2005` -&gt; `2005...18`
• `2010` -&gt; `2010...19`
• `2015` -&gt; `2015...20`
• `2020` -&gt; `2020...21`
• `1990` -&gt; `1990...22`
• `1995` -&gt; `1995...23`
• `2000` -&gt; `2000...24`
• `2005` -&gt; `2005...25`
• `2010` -&gt; `2010...26`
• `2015` -&gt; `2015...27`
• `2020` -&gt; `2020...28`</code></pre>
</div>
</div>
</section>
<section id="cleaning-names" class="level1">
<h1>Cleaning names</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_1990 =</span> x1990_8,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_1995 =</span> x1995_9,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_2000 =</span> x2000_10,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_2005 =</span> x2005_11,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_2010 =</span> x2010_12,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_2015 =</span> x2015_13,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">stock_2020 =</span> x2020_14</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Checking column names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "index"                                                  
 [2] "region_development_group_country_or_area_of_destination"
 [3] "location_code_of_destination"                           
 [4] "region_development_group_country_or_area_of_origin"     
 [5] "location_code_of_origin"                                
 [6] "stock_1990"                                             
 [7] "stock_1995"                                             
 [8] "stock_2000"                                             
 [9] "stock_2005"                                             
[10] "stock_2010"                                             
[11] "stock_2015"                                             
[12] "stock_2020"                                             </code></pre>
</div>
</div>
</section>
<section id="checking-for-missing-values" class="level1">
<h1>Checking for missing values</h1>
<section id="check-that-the-..-missing-values-are-being-read-correctly" class="level2">
<h2 class="anchored" data-anchor-id="check-that-the-..-missing-values-are-being-read-correctly">Check that the “..” (missing values) are being read correctly</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(index<span class="sc">==</span><span class="st">"393"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"stock"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  stock_1990 stock_1995 stock_2000 stock_2005 stock_2010 stock_2015 stock_2020
  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     
1 &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(index<span class="sc">==</span><span class="st">"36469"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"stock"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 7
  stock_1990 stock_1995 stock_2000 stock_2005 stock_2010 stock_2015 stock_2020
  &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;     
1 &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;       &lt;NA&gt;      </code></pre>
</div>
</div>
</section>
<section id="checking-more-broadly" class="level2">
<h2 class="anchored" data-anchor-id="checking-more-broadly">Checking more broadly</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index 
                                                      0 
region_development_group_country_or_area_of_destination 
                                                      0 
                           location_code_of_destination 
                                                      0 
     region_development_group_country_or_area_of_origin 
                                                      0 
                                location_code_of_origin 
                                                      0 
                                             stock_1990 
                                                  10451 
                                             stock_1995 
                                                  10105 
                                             stock_2000 
                                                  10046 
                                             stock_2005 
                                                   9696 
                                             stock_2010 
                                                   8975 
                                             stock_2015 
                                                   8227 
                                             stock_2020 
                                                   8362 </code></pre>
</div>
</div>
<p>From the methodology PDF: “The tilde (~) indicates that the data are protected for privacy reasons because the number in the cell or the number used to derive the indicator in the cell is less than five”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data, <span class="cf">function</span>(x) <span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">"~"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index 
                                                      0 
region_development_group_country_or_area_of_destination 
                                                      0 
                           location_code_of_destination 
                                                      0 
     region_development_group_country_or_area_of_origin 
                                                      0 
                                location_code_of_origin 
                                                      0 
                                             stock_1990 
                                                      0 
                                             stock_1995 
                                                      0 
                                             stock_2000 
                                                      0 
                                             stock_2005 
                                                      0 
                                             stock_2010 
                                                      0 
                                             stock_2015 
                                                      0 
                                             stock_2020 
                                                      0 </code></pre>
</div>
</div>
<p>From the notes tab: “An em dash (—) indicates that the magnitude is not zero, but less than half of the unit employed (i.e.&nbsp;is rounded to 0, when in fact it is not 0)”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data, <span class="cf">function</span>(x) <span class="fu">sum</span>(x <span class="sc">==</span> <span class="st">"—"</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index 
                                                      0 
region_development_group_country_or_area_of_destination 
                                                      0 
                           location_code_of_destination 
                                                      0 
     region_development_group_country_or_area_of_origin 
                                                      0 
                                location_code_of_origin 
                                                      0 
                                             stock_1990 
                                                      0 
                                             stock_1995 
                                                      0 
                                             stock_2000 
                                                      0 
                                             stock_2005 
                                                      0 
                                             stock_2010 
                                                      0 
                                             stock_2015 
                                                      0 
                                             stock_2020 
                                                      0 </code></pre>
</div>
</div>
</section>
<section id="checking-the-data-types" class="level2">
<h2 class="anchored" data-anchor-id="checking-the-data-types">Checking the data types</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [37,051 × 12] (S3: tbl_df/tbl/data.frame)
 $ index                                                  : num [1:37051] 1 2 3 4 5 6 7 8 9 10 ...
 $ region_development_group_country_or_area_of_destination: chr [1:37051] "WORLD" "WORLD" "WORLD" "WORLD" ...
 $ location_code_of_destination                           : num [1:37051] 900 900 900 900 900 900 900 900 900 900 ...
 $ region_development_group_country_or_area_of_origin     : chr [1:37051] "WORLD" "Sub-Saharan Africa" "Northern Africa and Western Asia" "Central and Southern Asia" ...
 $ location_code_of_origin                                : num [1:37051] 900 947 1833 921 1832 ...
 $ stock_1990                                             : chr [1:37051] "152 986 157" "15 334 807" "16 365 218" "31 104 020" ...
 $ stock_1995                                             : chr [1:37051] "161 289 976" "16 488 973" "18 069 437" "29 069 983" ...
 $ stock_2000                                             : chr [1:37051] "173 230 585" "15 638 014" "19 437 054" "30 897 694" ...
 $ stock_2005                                             : chr [1:37051] "191 446 828" "17 274 985" "21 867 791" "33 347 690" ...
 $ stock_2010                                             : chr [1:37051] "220 983 187" "19 942 724" "25 313 711" "41 082 388" ...
 $ stock_2015                                             : chr [1:37051] "247 958 644" "24 197 211" "32 606 047" "46 481 130" ...
 $ stock_2020                                             : chr [1:37051] "280 598 105" "28 284 538" "37 563 820" "51 229 549" ...
 - attr(*, "spec")=
  .. cols(
  ..   Index = col_double(),
  ..   `Region, development group, country or area of destination` = col_character(),
  ..   `Notes of destination` = col_skip(),
  ..   `Location code of destination` = col_double(),
  ..   `Type of data of destination` = col_skip(),
  ..   `Region, development group, country or area of origin` = col_character(),
  ..   `Location code of origin` = col_double(),
  ..   `1990...8` = col_character(),
  ..   `1995...9` = col_character(),
  ..   `2000...10` = col_character(),
  ..   `2005...11` = col_character(),
  ..   `2010...12` = col_character(),
  ..   `2015...13` = col_character(),
  ..   `2020...14` = col_character(),
  ..   `1990...15` = col_skip(),
  ..   `1995...16` = col_skip(),
  ..   `2000...17` = col_skip(),
  ..   `2005...18` = col_skip(),
  ..   `2010...19` = col_skip(),
  ..   `2015...20` = col_skip(),
  ..   `2020...21` = col_skip(),
  ..   `1990...22` = col_skip(),
  ..   `1995...23` = col_skip(),
  ..   `2000...24` = col_skip(),
  ..   `2005...25` = col_skip(),
  ..   `2010...26` = col_skip(),
  ..   `2015...27` = col_skip(),
  ..   `2020...28` = col_skip()
  .. )</code></pre>
</div>
</div>
<section id="investigating-whats-going-on" class="level3">
<h3 class="anchored" data-anchor-id="investigating-whats-going-on">Investigating what’s going on</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(data<span class="sc">$</span>stock_1990, <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1] "7"          "83"         "73 378"     "564"        "4 356 648" 
   [6] "2"          "3 145"      "8 752"      "45 711"     "38 846"    
  [11] "19 921"     NA           "33 246"     NA           "662"       
  [16] "5 268"      NA           NA           NA           "15"        
  [21] "611"        "622"        NA           "74 902"     "21 633"    
  [26] NA           "2 035"      "1 078"      "4 108"      "17"        
  [31] "5 174"      "3 401"      NA           NA           NA          
  [36] "762"        NA           NA           "4 902"      "29 974"    
  [41] "6 625"      "6 235"      "1"          "37 630"     "2"         
  [46] "806"        "1 313 100"  "39"         "3"          "463"       
  [51] "39 370"     "1 150"      "60 399"     NA           "2 392"     
  [56] "515"        "3 852"      "21"         "638"        "92"        
  [61] "146 587"    "4 488"      "337"        "12 028"     NA          
  [66] "2 193"      NA           "38"         "853"        "774"       
  [71] "2 753"      "6"          "1 021"      "25 679"     NA          
  [76] "162 485"    "476"        NA           "998"        NA          
  [81] NA           "660 809"    "1 771"      NA           NA          
  [86] NA           "56"         "107 527"    NA           "150 447"   
  [91] "28 272"     "2 296"      "2 506"      NA           "1"         
  [96] "4 337"      NA           "30 631"     NA           NA          
 [101] "65"         NA           "184 199"    "131 906"    NA          
 [106] NA           "46 886"     "17 492"     "579 891"    "1 028"     
 [111] "35 078"     NA           NA           "10 793"     "1 135 152" 
 [116] "2 804"      "16 241"     NA           "14 229"     "244 814"   
 [121] NA           NA           "235"        NA           NA          
 [126] "101 617"    NA           "26 816"     NA           "15"        
 [131] "169"        "152"        "795 601"    NA           NA          
 [136] "11 033"     NA           NA           "183"        "132 104"   
 [141] "1 150"      "2 797 292"  NA           "3 369"      "601"       
 [146] NA           NA           NA           "4 953"      "6 512"     
 [151] NA           "979"        "125 952"    "9 870"      "69"        
 [156] NA           "150 313"    "7 178"      "187"        NA          
 [161] NA           "2 213"      "3 471"      "74"         "4"         
 [166] "83"         "138 289"    "110 456"    "47"         "6 393"     
 [171] "1 588"      "144 229"    NA           "1 754"      "379"       
 [176] "2 102"      "14"         NA           NA           "56 214"    
 [181] NA           "318"        "74 272"     "7 899"      "357"       
 [186] "187"        NA           "29 884"     "3 321"      "4"         
 [191] "1 271"      "275"        NA           NA           "103"       
 [196] "24"         "1 080"      "59"         "2 031"      "258"       
 [201] "17 730"     "2 298"      "456 621"    "60"         "3 718"     
 [206] NA           NA           NA           "90 697"     NA          
 [211] "2 203 657"  NA           NA           "66"         "39"        
 [216] NA           "1 311"      "83 355"     "8 200"      "166"       
 [221] "1 691"      "6 647"      NA           "356"        NA          
 [226] "3 577"      "112 074"    "2 445"      "9 781"      NA          
 [231] "4 767"      "86"         "107"        "191"        "54"        
 [236] "130 797"    "113 909"    NA           "644 008"    "6"         
 [241] "267"        "604"        "894"        "31 287"     "1 062 746" 
 [246] NA           NA           "1 130"      "777"        "240 897"   
 [251] "110 168"    "25"         "71 692"     "146"        NA          
 [256] "248"        "5 637"      "275 246"    "31 939 653" NA          
 [261] "3 633"      "15"         "1"          "31"         "4 749 803" 
 [266] NA           "130"        "264"        NA           NA          
 [271] NA           "48"         "175 006"    NA           "106"       
 [276] "10 290 728" "38"         "35 807"     NA           "4 326"     
 [281] "11"         "999"        "79 772"     "1 263"      "7 679 582" 
 [286] NA           NA           "2 211"      "17 388"     "12 843"    
 [291] NA           "22"         NA           NA           NA          
 [296] "5 275 952"  NA           "493"        "395"        "237"       
 [301] "9"          "9"          "3 175 455"  "1 134"      "304 291"   
 [306] NA           "235 260"    NA           "1 567 742"  "7"         
 [311] NA           "3"          NA           NA           "34 419"    
 [316] "86"         "16"         "115"        "1 262"      "95 013"    
 [321] "146"        "84"         "116 350"    "13 386"     "1"         
 [326] NA           NA           NA           NA           "52"        
 [331] "156"        "42"         "442"        "21"         "11"        
 [336] "441"        "8 806"      NA           "124 244"    "9 964"     
 [341] "1 218"      "1"          "561 567"    "48 750"     "4 357"     
 [346] "292"        "166"        "47 634"     NA           NA          
 [351] "1 339 092"  "18"         "9"          "29 394"     "407"       
 [356] "617 531"    "101"        NA           NA           "12 411"    
 [361] NA           "98"         "731"        NA           "2 547"     
 [366] "29 981"     NA           "23"         "75 749"     "1 014 945" 
 [371] "221"        "1 269"      "306"        "5 842"      "12 836"    
 [376] "3 306"      "225 393"    "3 216"      "752"        NA          
 [381] "2 286"      "70"         "351 109"    "499"        "1 902"     
 [386] "421"        "1 194"      NA           "48 570"     "4 499"     
 [391] "119 693"    "91 442"     "3 291"      "12"         NA          
 [396] "349"        NA           "47 917"     NA           "4 239 409" 
 [401] NA           "242"        "650"        "324"        "23 708"    
 [406] "1 034"      NA           "2 207"      "5 486"      "3 021"     
 [411] "97"         "18 557"     NA           "23 721"     "941"       
 [416] "954"        "219 427"    "8 994"      "262"        "8"         
 [421] "285"        NA           NA           "151"        NA          
 [426] "34"         "29"         "57 106"     "742 547"    "2"         
 [431] NA           NA           "431"        NA           "44"        
 [436] "6"          "8 066"      "3 409"      NA           "8 704"     
 [441] "25"         "571 072"    "10"         "44 672"     "251"       
 [446] "1 157 628"  NA           "2 525 132"  NA           NA          
 [451] "20"         NA           "633"        "111"        "2 487 058" 
 [456] "504 409"    "3"          "2 087"      "1 876"      "8 519"     
 [461] "171 423"    "942"        "59 645"     "968"        "159"       
 [466] "616"        "750"        NA           NA           "24 220"    
 [471] "3 185"      NA           "1 539"      "236 659"    NA          
 [476] NA           NA           NA           "2 702"      "2 756"     
 [481] NA           "11 553 287" "127"        "175"        "128"       
 [486] "2 684 182"  "310"        "442 031"    "490 202"    "93"        
 [491] "41"         "20"         "161"        NA           NA          
 [496] NA           "26 527"     "114 334"    NA           "6 600"     
 [501] "5 207"      NA           "25 093"     "1"          "85 506"    
 [506] "13"         "635 007"    "62"         NA           "8 372"     
 [511] "371"        "218"        "153"        "306"        NA          
 [516] "280"        "240 605"    "433 960"    "14"         "23 233"    
 [521] NA           NA           "5"          "2"          NA          
 [526] "190 023"    "336"        "34 351"     "575"        "3 611 619" 
 [531] "1 448"      NA           "1 464"      "179 462"    "718"       
 [536] "17"         "3 931"      NA           NA           NA          
 [541] "121"        "311"        "39 728"     "19 692"     "571"       
 [546] NA           NA           "22"         NA           "67 994"    
 [551] "12 029"     "4"          "9 210"      "30"         "54"        
 [556] "76 762"     "40 724"     "426 230"    "38 891"     NA          
 [561] "17"         "22 711"     "4 164"      NA           "75"        
 [566] NA           "1 772"      "517"        "118"        NA          
 [571] NA           NA           "99"         "118 347"    "56 052"    
 [576] NA           "68"         NA           NA           NA          
 [581] "6 641"      "514"        "1 312 506"  NA           NA          
 [586] "508"        "92"         "2 657"      "3 020"      NA          
 [591] "9 000 907"  NA           NA           "148"        "174 549"   
 [596] NA           NA           "1 218"      "6 301"      NA          
 [601] "895 249"    "18 927"     "571"        NA           "2"         
 [606] "2 130"      NA           NA           NA           NA          
 [611] "325 993"    "27 297"     "5"          "37 973 694" NA          
 [616] NA           "164"        "610"        "43 033"     "1 246"     
 [621] "111 858"    "97"         "216 929"    NA           "370"       
 [626] "458"        "5"          "13 974"     NA           "85 564"    
 [631] NA           "3 433 664"  NA           "73 874"     NA          
 [636] NA           NA           "9 218"      NA           "21"        
 [641] "1 544"      "1 402"      "6 889"      "51"         "1 943"     
 [646] "552"        "3"          NA           "1 079 173"  "4 116"     
 [651] "557"        NA           "64"         NA           "48 798"    
 [656] "3 317"      "133 914"    "1 209"      "477 272"    "19 411"    
 [661] "15"         NA           "1 955"      "2 073"      "140 456"   
 [666] "7 694"      NA           "4 391"      "13 783"     "43"        
 [671] "990"        "2 116"      "1"          "4 462"      "51"        
 [676] "7"          "106"        NA           "123 500"    "4 217"     
 [681] "1 462"      "51"         NA           "30"         "168 403"   
 [686] "5 302"      "13 660"     NA           "2 702"      "295"       
 [691] NA           "118 863"    "85"         "36 272"     "181 517"   
 [696] "2 096"      "13"         "15 275"     "295"        "45"        
 [701] NA           "840"        "3 613"      NA           NA          
 [706] "4 783"      NA           "31 142"     "195"        "6 547"     
 [711] NA           "1"          NA           NA           NA          
 [716] NA           NA           "1 020"      NA           "58 990"    
 [721] NA           "133 363"    "1 094"      "215"        NA          
 [726] NA           "10 229"     "4 274 977"  "719"        "12"        
 [731] "66 902"     NA           NA           NA           "187 896"   
 [736] "17 599"     "561"        "62"         "4 247"      NA          
 [741] "1 760"      "552"        "1 559"      NA           "5 977"     
 [746] "229 945"    "54 562"     "10 199"     NA           "984"       
 [751] NA           "2 004"      "743"        "5 206"      "2 747 367" 
 [756] "81 077"     "475 684"    NA           "8 027"      NA          
 [761] NA           "694 088"    "10 520"     "6"          NA          
 [766] "60 882"     "75 965"     "2"          NA           "830"       
 [771] "1"          "44 769"     "943"        "6 940"      NA          
 [776] "8 800"      "92 533"     "1 180"      NA           "3 013"     
 [781] "80"         "345"        "1"          "141 726"    "738 976"   
 [786] "97"         "8 745"      "595"        "2 722"      "19"        
 [791] "186"        NA           "4 639"      "71"         "178 278"   
 [796] "143 740"    "21 906"     "64"         NA           NA          
 [801] "55"         "7"          "139"        NA           "1 007"     
 [806] "861 760"    "14 397"     "21 819 019" "234"        NA          
 [811] "4"          "794 255"    NA           NA           NA          
 [816] NA           "87"         "142"        "665"        "3 619"     
 [821] "6 477"      NA           "74"         NA           "60 959"    
 [826] "127 445"    NA           "10"         NA           "96"        
 [831] "217 573"    NA           "163"        NA           NA          
 [836] "166"        "6 473"      "110 658"    "25 947"     NA          
 [841] "11 287"     "976 447"    "300 229"    "9"          "304"       
 [846] "21 387"     "96 599"     NA           "32 132"     "5"         
 [851] "69"         "26"         "80"         "12"         "527"       
 [856] NA           "8"          "8"          "2 310"      "24"        
 [861] "9 544"      "98 615"     "24"         NA           "4 357"     
 [866] "1 356"      "139 632"    "116"        NA           "145 177"   
 [871] "27"         NA           "146"        "423"        "27"        
 [876] "12 442"     NA           NA           "1 248 207"  "28"        
 [881] NA           "273"        "20"         "20 305"     NA          
 [886] NA           "50 845"     "68"         NA           "4 534"     
 [891] NA           "8"          "126"        NA           NA          
 [896] NA           "2 089"      NA           "1"          "133"       
 [901] "786"        "7 813"      "117 644"    "825"        NA          
 [906] "114 810"    "15"         NA           "11 285"     "55 446"    
 [911] NA           "1"          "20 435"     "15"         "11 402"    
 [916] NA           "189"        "102 224"    NA           "115 871"   
 [921] NA           "1 777 073"  "4"          "4 923"      "1 047"     
 [926] NA           "72 426"     "1"          "662"        "19 358"    
 [931] "5 039"      NA           NA           NA           NA          
 [936] "819 653"    "1 290"      NA           NA           "3 282"     
 [941] "266"        "31"         NA           "70"         "2"         
 [946] NA           "421"        "8"          "4 868"      "136 917"   
 [951] "1 470"      "20 572"     "11 226"     "332"        "737"       
 [956] "2 156 198"  "1 115"      NA           "11"         "215"       
 [961] "12"         "606"        NA           NA           "943"       
 [966] "92"         NA           "43"         "36 388"     "126 308"   
 [971] "23 737"     NA           "2 100"      "36"         "1"         
 [976] "15 780"     "6 040"      NA           NA           NA          
 [981] "131 997"    "5 007 386"  NA           "137"        "18 470"    
 [986] "295"        NA           "333"        "21 902"     "68"        
 [991] "10 144"     NA           "134 471"    "1 151"      NA          
 [996] "492 107"    "2 419 971"  "139 794"    "1 084"      NA          </code></pre>
</div>
</div>
<p>I think the problem is the space (” “) between numbers.</p>
</section>
</section>
</section>
<section id="changing-data-types" class="level1">
<h1>Changing data types</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_1990 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_1990))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_1995 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_1995))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_2000 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_2000))</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_2005 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_2005))</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_2010 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_2010))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_2015 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_2015))</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>stock_2020 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, data<span class="sc">$</span>stock_2020))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="checking" class="level2">
<h2 class="anchored" data-anchor-id="checking">Checking</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [37,051 × 12] (S3: tbl_df/tbl/data.frame)
 $ index                                                  : num [1:37051] 1 2 3 4 5 6 7 8 9 10 ...
 $ region_development_group_country_or_area_of_destination: chr [1:37051] "WORLD" "WORLD" "WORLD" "WORLD" ...
 $ location_code_of_destination                           : num [1:37051] 900 900 900 900 900 900 900 900 900 900 ...
 $ region_development_group_country_or_area_of_origin     : chr [1:37051] "WORLD" "Sub-Saharan Africa" "Northern Africa and Western Asia" "Central and Southern Asia" ...
 $ location_code_of_origin                                : num [1:37051] 900 947 1833 921 1832 ...
 $ stock_1990                                             : num [1:37051] 1.53e+08 1.53e+07 1.64e+07 3.11e+07 1.48e+07 ...
 $ stock_1995                                             : num [1:37051] 1.61e+08 1.65e+07 1.81e+07 2.91e+07 1.79e+07 ...
 $ stock_2000                                             : num [1:37051] 1.73e+08 1.56e+07 1.94e+07 3.09e+07 2.14e+07 ...
 $ stock_2005                                             : num [1:37051] 1.91e+08 1.73e+07 2.19e+07 3.33e+07 2.56e+07 ...
 $ stock_2010                                             : num [1:37051] 2.21e+08 1.99e+07 2.53e+07 4.11e+07 3.10e+07 ...
 $ stock_2015                                             : num [1:37051] 2.48e+08 2.42e+07 3.26e+07 4.65e+07 3.52e+07 ...
 $ stock_2020                                             : num [1:37051] 2.81e+08 2.83e+07 3.76e+07 5.12e+07 3.84e+07 ...
 - attr(*, "spec")=
  .. cols(
  ..   Index = col_double(),
  ..   `Region, development group, country or area of destination` = col_character(),
  ..   `Notes of destination` = col_skip(),
  ..   `Location code of destination` = col_double(),
  ..   `Type of data of destination` = col_skip(),
  ..   `Region, development group, country or area of origin` = col_character(),
  ..   `Location code of origin` = col_double(),
  ..   `1990...8` = col_character(),
  ..   `1995...9` = col_character(),
  ..   `2000...10` = col_character(),
  ..   `2005...11` = col_character(),
  ..   `2010...12` = col_character(),
  ..   `2015...13` = col_character(),
  ..   `2020...14` = col_character(),
  ..   `1990...15` = col_skip(),
  ..   `1995...16` = col_skip(),
  ..   `2000...17` = col_skip(),
  ..   `2005...18` = col_skip(),
  ..   `2010...19` = col_skip(),
  ..   `2015...20` = col_skip(),
  ..   `2020...21` = col_skip(),
  ..   `1990...22` = col_skip(),
  ..   `1995...23` = col_skip(),
  ..   `2000...24` = col_skip(),
  ..   `2005...25` = col_skip(),
  ..   `2010...26` = col_skip(),
  ..   `2015...27` = col_skip(),
  ..   `2020...28` = col_skip()
  .. )</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(data<span class="sc">$</span>stock_1990, <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   [1]     1485       40       NA      606      878       30     2238   838875
   [9]    24240       74  1051525      267      849       61       NA       12
  [17]      355    58090       80      791  2091553       18       28       NA
  [25]      137   162485        5      138     5816     2690       NA       37
  [33]       NA       NA       24    11457       10        3       NA     1646
  [41]    69580     1523   136812      177     5780       NA        1       65
  [49]       11    42923       78      327       17   152316     5298       NA
  [57]   233219       85       24       NA     1078       39       NA       76
  [65]       NA       35     1308       65     1312       NA       99   111650
  [73]      759       82      736       14       NA        7       NA     8712
  [81]    85737       NA       NA     7972     8574       14       NA       NA
  [89]       60       NA     6681 37589556       NA       NA       NA        3
  [97]       76       NA        1       NA     1425       NA        8     1688
 [105]      910    95707     2761      226  7231399      279     5093       NA
 [113]       NA        3    10385        1     2015   708822       NA     2526
 [121]      157       NA    60576     3752       21    23232    11808       NA
 [129]       85      124     5397        4      998       NA       NA       NA
 [137]        1   325719      203      398       NA     1521      408     6566
 [145]     1043      381       NA     7456      252    40862       20        9
 [153]     6672       NA        1      600       36       NA       NA     1693
 [161]       23       NA      538       NA   145689   219476     9605       NA
 [169]       NA       18    11437     1456       NA     8567    85115       58
 [177]       46      135      246       NA       NA       59      479      605
 [185]       NA       97       23        3   678065    34268      940     2572
 [193]   546032       NA      274    32396    29413       NA      597   430726
 [201]       NA     2639       NA       NA       NA     2440    14382     7540
 [209]       NA       NA       85   371121       NA       NA       NA      129
 [217]     9087       NA       NA   180765       58       16       NA     1182
 [225]      137      544  2218621    81858    31575    79220       20    32027
 [233]       NA    15675        1       86   144229     1056       NA       NA
 [241]   467671       14  3642910       NA       NA      411     1672  2818248
 [249]     6942    15254    19136     5650       NA      370        3      265
 [257]       50     7039    10860       NA       NA       48   148782       14
 [265]   163266    65256      539       NA     5713     1918   178278       NA
 [273]        3       NA       NA    45880   576752    64124       NA    32469
 [281]       NA       NA       NA      688   744106       39    19598     9356
 [289]        3      696     4478       37       77       NA 54545883      325
 [297]      297   437510        1       NA       NA     3338     1699     6643
 [305]      865      289       NA   114683       NA     6624       NA       NA
 [313]      683      569      811       29       NA       NA    55619       NA
 [321]    68225     1962     9973       NA   180374    94695       NA   569852
 [329]      101       NA       NA    29589        6  5023667     5731    13386
 [337]   784043        2       NA 15689666    14253        8    40537    65484
 [345]    15761       NA       NA       35    14536       NA     4067       87
 [353]   241380       NA     1086      179     1881     2699      247      543
 [361]    35938      363      606       NA       18       NA   326101       NA
 [369]       NA     2886       NA   491359     2779      215       31  1673426
 [377]       NA     1190        8     1119    13116      146     1418       NA
 [385]     1310       NA   138898       NA    99153      133       20       NA
 [393]       NA      245    69469       NA       NA    38261       NA       NA
 [401]       NA       NA        4     4197        4      426   245080       NA
 [409]     1359   752954     4700        2      276       NA      672     1012
 [417]       NA       NA     2980       NA   644008    57407  1177322       NA
 [425]     6742      131   734197     3619       NA       NA   168775      218
 [433]   751548     2140       NA        6       NA   229945       NA      127
 [441]   253791     4832      106    38375       NA     8148    19805       55
 [449]    62194       NA       19   114910       NA       77       NA      247
 [457]       80    19876       NA       69      539       NA    10625       NA
 [465]       51    10969       NA       NA       NA       NA    65631       NA
 [473]       NA    55114    25679   347390       17     1803       47     5608
 [481]        5     3386     2157       NA       NA   112759       NA    42473
 [489]        6       91       NA       NA     1163        8     3435       NA
 [497]       NA     1678     7159       74      217   128711    16702     1371
 [505]        5      118       NA      181       74      150       NA       NA
 [513]   120698      612       NA      200        6   177002       61  4036926
 [521]       NA      759       NA      906       NA     5541      336 18123683
 [529]    24204    31121        3       NA   303427       NA   466300       15
 [537]       NA     4150    47360    67652      194      129    30418   460000
 [545]      532    46490        1        7    17725       NA    12650       22
 [553]   250233   141573      808     1089    36004     9705      276      378
 [561]   124922        1        9       NA        7     2310   346629   104084
 [569]     1245    18251     3239       NA      113     2044      156     3846
 [577]    13283       68       NA       NA     3011       NA  4157670        5
 [585]     4570     5813      182    16258     2807       64      418       33
 [593]       NA    39681    10519       NA   104579       NA     5521       NA
 [601]        9       NA  1104536       NA       35       27       NA       NA
 [609]     1640      357       NA     1628   188003    13401    40489        1
 [617]    40724      539    55787   275246     1352       NA    12416       NA
 [625]     3143      139      273       NA       NA       NA       NA        3
 [633]     3424       NA       50    23827       NA        1       66       34
 [641]     6602       NA       NA       NA    20731       NA       NA       39
 [649]      185      944    15810      394       NA       NA       NA   326879
 [657]       NA       NA       NA       NA      296       NA       NA       NA
 [665]      429     9718   483813       NA       20    28801    76307      521
 [673]       13      151       NA       NA   323236    11808       38       13
 [681]      461       53   421430       79       NA       NA      752       NA
 [689]       43       NA       NA      268     6507   577614      139       NA
 [697]  4605987       38    25735       NA       NA      199        5     6959
 [705]        7       NA     3339      820 12653331     3946    70059      149
 [713]      639       32      333       NA     4599  7309485     2804    87249
 [721]       NA      103       NA      370   152771       60    54138       NA
 [729]      847      235      170   917139       37     3432     1055    20474
 [737]       NA       NA    10078       32        5       NA    62699  2474111
 [745]       82       35       NA       NA    16520       23       NA       NA
 [753]       NA  4575821        2     3990       NA       NA       NA       NA
 [761]    39755      110       74   671884       NA     1988    27895       60
 [769]       20      186       NA       10     1673     5798       NA  1061009
 [777]       NA       84    34804   174506       NA   743620       NA    34086
 [785]      246       75   120728        5    81077    30582      822   115495
 [793]    13339       NA       64     4940       97       NA      324    27195
 [801]       NA     1018    40660    11989     6720       NA    32863       NA
 [809]     1632       NA       NA       NA     3748   396450       17     2315
 [817]     2662      189       53       NA   352763        4     9959       NA
 [825]       NA    19579    15282       75    23047     3440     6458     1878
 [833]    17448       NA       81   166491   125073       NA    33951     8714
 [841]       15       NA       NA      388       NA        2       NA   306971
 [849]       NA       NA     1124      133       NA       NA     1413      134
 [857]       NA       59     7478       NA        1     1958       35        8
 [865]    48291        4       NA       21      289        7     2897    62302
 [873]     7502     5375    33629   407716     1291    30550    12924    15503
 [881]    98718    10585        3    97320       26        4       24        5
 [889]    19043      963       NA      200       99        1       NA        5
 [897]       NA     5635       NA       NA       NA    34186       NA     1982
 [905]       NA    31169       12     4340      325      148       73   490981
 [913]       NA       NA     8987      411    72424   282969     2473       NA
 [921]      100       NA        3       30       NA       NA     9668     8267
 [929]      405   182646       NA       NA    19176     3275     2098       18
 [937]        5  7591979        1       16    11301     1913       26       NA
 [945]      164      109       59       NA       NA       17   182486      269
 [953]      311    38424   149308      319    98527      550        3       NA
 [961]       NA    41403       11      191    57476       69  1313100       NA
 [969]    10067       NA        7      552        8       NA    11891   916281
 [977]       87       NA      482     1338  2911898       NA    11672       96
 [985]     2051     2134    44331       96      498        2      611  1794958
 [993]       NA   247088       11    21781      112       NA       NA       NA</code></pre>
</div>
</div>
</section>
</section>
<section id="checking-unique-values-for-index" class="level1">
<h1>Checking unique values for index</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37051</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(data<span class="sc">$</span>index))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 37051</code></pre>
</div>
</div>
</section>
<section id="checking-unique-values-of-regions" class="level1">
<h1>Checking unique values of regions</h1>
<section id="region_development_group_country_or_area_of_destination" class="level2">
<h2 class="anchored" data-anchor-id="region_development_group_country_or_area_of_destination"><code>region_development_group_country_or_area_of_destination</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data<span class="sc">$</span>region_development_group_country_or_area_of_destination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "WORLD"                                                      
  [2] "Sub-Saharan Africa"                                         
  [3] "Northern Africa and Western Asia"                           
  [4] "Central and Southern Asia"                                  
  [5] "Eastern and South-Eastern Asia"                             
  [6] "Latin America and the Caribbean"                            
  [7] "Oceania (excluding Australia and New Zealand)"              
  [8] "Australia and New Zealand"                                  
  [9] "Europe and Northern America"                                
 [10] "Developed regions"                                          
 [11] "Less developed regions"                                     
 [12] "Less developed regions, excluding least developed countries"
 [13] "Less developed regions, excluding China"                    
 [14] "Least developed countries"                                  
 [15] "Land-locked Developing Countries (LLDC)"                    
 [16] "Small island developing States (SIDS)"                      
 [17] "High-income countries"                                      
 [18] "Middle-income countries"                                    
 [19] "Upper-middle-income countries"                              
 [20] "Lower-middle-income countries"                              
 [21] "Low-income countries"                                       
 [22] "AFRICA"                                                     
 [23] "Eastern Africa"                                             
 [24] "Burundi"                                                    
 [25] "Comoros"                                                    
 [26] "Djibouti"                                                   
 [27] "Eritrea"                                                    
 [28] "Ethiopia"                                                   
 [29] "Kenya"                                                      
 [30] "Madagascar"                                                 
 [31] "Malawi"                                                     
 [32] "Mauritius*"                                                 
 [33] "Mayotte*"                                                   
 [34] "Mozambique"                                                 
 [35] "Réunion*"                                                   
 [36] "Rwanda"                                                     
 [37] "Seychelles"                                                 
 [38] "Somalia"                                                    
 [39] "South Sudan"                                                
 [40] "Uganda"                                                     
 [41] "United Republic of Tanzania*"                               
 [42] "Zambia"                                                     
 [43] "Zimbabwe"                                                   
 [44] "Middle Africa"                                              
 [45] "Angola"                                                     
 [46] "Cameroon"                                                   
 [47] "Central African Republic"                                   
 [48] "Chad"                                                       
 [49] "Congo"                                                      
 [50] "Democratic Republic of the Congo"                           
 [51] "Equatorial Guinea"                                          
 [52] "Gabon"                                                      
 [53] "Sao Tome and Principe"                                      
 [54] "Northern Africa"                                            
 [55] "Algeria"                                                    
 [56] "Egypt"                                                      
 [57] "Libya"                                                      
 [58] "Morocco"                                                    
 [59] "Sudan"                                                      
 [60] "Tunisia"                                                    
 [61] "Western Sahara"                                             
 [62] "Southern Africa"                                            
 [63] "Botswana"                                                   
 [64] "Eswatini"                                                   
 [65] "Lesotho"                                                    
 [66] "Namibia"                                                    
 [67] "South Africa"                                               
 [68] "Western Africa"                                             
 [69] "Benin"                                                      
 [70] "Burkina Faso"                                               
 [71] "Cabo Verde"                                                 
 [72] "Côte d'Ivoire"                                              
 [73] "Gambia"                                                     
 [74] "Ghana"                                                      
 [75] "Guinea"                                                     
 [76] "Guinea-Bissau"                                              
 [77] "Liberia"                                                    
 [78] "Mali"                                                       
 [79] "Mauritania"                                                 
 [80] "Niger"                                                      
 [81] "Nigeria"                                                    
 [82] "Saint Helena*"                                              
 [83] "Senegal"                                                    
 [84] "Sierra Leone"                                               
 [85] "Togo"                                                       
 [86] "ASIA"                                                       
 [87] "Central Asia"                                               
 [88] "Kazakhstan"                                                 
 [89] "Kyrgyzstan"                                                 
 [90] "Tajikistan"                                                 
 [91] "Turkmenistan"                                               
 [92] "Uzbekistan"                                                 
 [93] "Eastern Asia"                                               
 [94] "China*"                                                     
 [95] "China, Hong Kong SAR*"                                      
 [96] "China, Macao SAR*"                                          
 [97] "China, Taiwan Province of China*"                           
 [98] "Dem. People's Republic of Korea"                            
 [99] "Japan"                                                      
[100] "Mongolia"                                                   
[101] "Republic of Korea"                                          
[102] "South-Eastern Asia"                                         
[103] "Brunei Darussalam"                                          
[104] "Cambodia"                                                   
[105] "Indonesia"                                                  
[106] "Lao People's Democratic Republic"                           
[107] "Malaysia*"                                                  
[108] "Myanmar"                                                    
[109] "Philippines"                                                
[110] "Singapore"                                                  
[111] "Thailand"                                                   
[112] "Timor-Leste"                                                
[113] "Viet Nam"                                                   
[114] "Southern Asia"                                              
[115] "Afghanistan"                                                
[116] "Bangladesh"                                                 
[117] "Bhutan"                                                     
[118] "India"                                                      
[119] "Iran (Islamic Republic of)"                                 
[120] "Maldives"                                                   
[121] "Nepal"                                                      
[122] "Pakistan"                                                   
[123] "Sri Lanka"                                                  
[124] "Western Asia"                                               
[125] "Armenia"                                                    
[126] "Azerbaijan*"                                                
[127] "Bahrain"                                                    
[128] "Cyprus*"                                                    
[129] "Georgia*"                                                   
[130] "Iraq"                                                       
[131] "Israel"                                                     
[132] "Jordan"                                                     
[133] "Kuwait"                                                     
[134] "Lebanon"                                                    
[135] "Oman"                                                       
[136] "Qatar"                                                      
[137] "Saudi Arabia"                                               
[138] "State of Palestine*"                                        
[139] "Syrian Arab Republic"                                       
[140] "Turkey"                                                     
[141] "United Arab Emirates"                                       
[142] "Yemen"                                                      
[143] "EUROPE"                                                     
[144] "Eastern Europe"                                             
[145] "Belarus"                                                    
[146] "Bulgaria"                                                   
[147] "Czechia"                                                    
[148] "Hungary"                                                    
[149] "Poland"                                                     
[150] "Republic of Moldova*"                                       
[151] "Romania"                                                    
[152] "Russian Federation"                                         
[153] "Slovakia"                                                   
[154] "Ukraine*"                                                   
[155] "Northern Europe"                                            
[156] "Channel Islands*"                                           
[157] "Denmark*"                                                   
[158] "Estonia"                                                    
[159] "Faroe Islands*"                                             
[160] "Finland*"                                                   
[161] "Iceland"                                                    
[162] "Ireland"                                                    
[163] "Isle of Man*"                                               
[164] "Latvia"                                                     
[165] "Lithuania"                                                  
[166] "Norway*"                                                    
[167] "Sweden"                                                     
[168] "United Kingdom*"                                            
[169] "Southern Europe"                                            
[170] "Albania"                                                    
[171] "Andorra"                                                    
[172] "Bosnia and Herzegovina"                                     
[173] "Croatia"                                                    
[174] "Gibraltar*"                                                 
[175] "Greece"                                                     
[176] "Holy See*"                                                  
[177] "Italy"                                                      
[178] "Malta"                                                      
[179] "Montenegro"                                                 
[180] "North Macedonia"                                            
[181] "Portugal"                                                   
[182] "San Marino"                                                 
[183] "Serbia*"                                                    
[184] "Slovenia"                                                   
[185] "Spain*"                                                     
[186] "Western Europe"                                             
[187] "Austria"                                                    
[188] "Belgium"                                                    
[189] "France*"                                                    
[190] "Germany"                                                    
[191] "Liechtenstein"                                              
[192] "Luxembourg"                                                 
[193] "Monaco"                                                     
[194] "Netherlands*"                                               
[195] "Switzerland"                                                
[196] "LATIN AMERICA AND THE CARIBBEAN"                            
[197] "Caribbean"                                                  
[198] "Anguilla*"                                                  
[199] "Antigua and Barbuda"                                        
[200] "Aruba*"                                                     
[201] "Bahamas"                                                    
[202] "Barbados"                                                   
[203] "Bonaire, Sint Eustatius and Saba*"                          
[204] "British Virgin Islands*"                                    
[205] "Cayman Islands*"                                            
[206] "Cuba"                                                       
[207] "Curaçao*"                                                   
[208] "Dominica"                                                   
[209] "Dominican Republic"                                         
[210] "Grenada"                                                    
[211] "Guadeloupe*"                                                
[212] "Haiti"                                                      
[213] "Jamaica"                                                    
[214] "Martinique*"                                                
[215] "Montserrat*"                                                
[216] "Puerto Rico*"                                               
[217] "Saint Barthélemy*"                                          
[218] "Saint Kitts and Nevis"                                      
[219] "Saint Lucia"                                                
[220] "Saint Martin (French part)*"                                
[221] "Saint Vincent and the Grenadines"                           
[222] "Sint Maarten (Dutch part)*"                                 
[223] "Trinidad and Tobago"                                        
[224] "Turks and Caicos Islands*"                                  
[225] "United States Virgin Islands*"                              
[226] "Central America"                                            
[227] "Belize"                                                     
[228] "Costa Rica"                                                 
[229] "El Salvador"                                                
[230] "Guatemala"                                                  
[231] "Honduras"                                                   
[232] "Mexico"                                                     
[233] "Nicaragua"                                                  
[234] "Panama"                                                     
[235] "South America"                                              
[236] "Argentina"                                                  
[237] "Bolivia (Plurinational State of)"                           
[238] "Brazil"                                                     
[239] "Chile"                                                      
[240] "Colombia"                                                   
[241] "Ecuador"                                                    
[242] "Falkland Islands (Malvinas)*"                               
[243] "French Guiana*"                                             
[244] "Guyana"                                                     
[245] "Paraguay"                                                   
[246] "Peru"                                                       
[247] "Suriname"                                                   
[248] "Uruguay"                                                    
[249] "Venezuela (Bolivarian Republic of)"                         
[250] "NORTHERN AMERICA"                                           
[251] "Bermuda*"                                                   
[252] "Canada"                                                     
[253] "Greenland*"                                                 
[254] "Saint Pierre and Miquelon*"                                 
[255] "United States of America*"                                  
[256] "OCEANIA"                                                    
[257] "Australia*"                                                 
[258] "New Zealand*"                                               
[259] "Melanesia"                                                  
[260] "Fiji"                                                       
[261] "New Caledonia*"                                             
[262] "Papua New Guinea"                                           
[263] "Solomon Islands"                                            
[264] "Vanuatu"                                                    
[265] "Micronesia"                                                 
[266] "Guam*"                                                      
[267] "Kiribati"                                                   
[268] "Marshall Islands"                                           
[269] "Micronesia (Fed. States of)"                                
[270] "Nauru"                                                      
[271] "Northern Mariana Islands*"                                  
[272] "Palau"                                                      
[273] "Polynesia*"                                                 
[274] "American Samoa*"                                            
[275] "Cook Islands*"                                              
[276] "French Polynesia*"                                          
[277] "Niue*"                                                      
[278] "Samoa"                                                      
[279] "Tokelau*"                                                   
[280] "Tonga"                                                      
[281] "Tuvalu"                                                     
[282] "Wallis and Futuna Islands*"                                 </code></pre>
</div>
</div>
<p>I’ll probably want to exclude these, since I care about individual countries–at least for now (although regions could be easier to visualize for the final product?):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>names_world <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"WORLD"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>names_continents <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"AFRICA"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ASIA"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"EUROPE"</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"LATIN AMERICA AND THE CARIBBEAN"</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"NORTHERN AMERICA"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"OCEANIA"</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>names_broad_regions <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sub-Saharan Africa"</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Northern Africa and Western Asia"</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Central and Southern Asia"</span>,</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Eastern and South-Eastern Asia"</span>,</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Latin America and the Caribbean"</span>,</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Oceania (excluding Australia and New Zealand)"</span>,</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Australia and New Zealand"</span>,</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Europe and Northern America"</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>names_specific_regions <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Eastern Africa"</span>,</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Middle Africa"</span>,</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Northern Africa"</span>,</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Southern Africa"</span>,</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Western Africa"</span>,</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Central Asia"</span>,</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Eastern Asia"</span>,</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"South-Eastern Asia"</span>,</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Southern Asia"</span>,</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Western Asia"</span>,</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Eastern Europe"</span>,</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Northern Europe"</span>,</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Southern Europe"</span>,</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Western Europe"</span>,</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Caribbean"</span>,</span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Central America"</span>,</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"South America"</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>names_development_groups <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Developed regions"</span>,</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Less developed regions"</span>,</span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Less developed regions, excluding least developed countries"</span>,</span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Less developed regions, excluding China"</span>,</span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Least developed countries"</span>,</span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Land-locked Developing Countries (LLDC)"</span>,</span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Small island developing States (SIDS)"</span> </span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a>names_income_groups <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a>  <span class="st">"High-income countries"</span>,</span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Middle-income countries"</span>,</span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Upper-middle-income countries"</span>,</span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Lower-middle-income countries"</span>,</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Low-income countries"</span></span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a>names_all <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a>  names_world,</span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a>  names_continents,</span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a>  names_broad_regions,</span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a>  names_specific_regions,</span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a>  names_development_groups,</span>
<span id="cb33-67"><a href="#cb33-67" aria-hidden="true" tabindex="-1"></a>  names_income_groups</span>
<span id="cb33-68"><a href="#cb33-68" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>region_development_group_country_or_area_of_destination <span class="sc">%in%</span> names_all) <span class="sc">%&gt;%</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_destination) <span class="sc">%&gt;%</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Burundi"                            "Comoros"                           
  [3] "Djibouti"                           "Eritrea"                           
  [5] "Ethiopia"                           "Kenya"                             
  [7] "Madagascar"                         "Malawi"                            
  [9] "Mauritius*"                         "Mayotte*"                          
 [11] "Mozambique"                         "Réunion*"                          
 [13] "Rwanda"                             "Seychelles"                        
 [15] "Somalia"                            "South Sudan"                       
 [17] "Uganda"                             "United Republic of Tanzania*"      
 [19] "Zambia"                             "Zimbabwe"                          
 [21] "Angola"                             "Cameroon"                          
 [23] "Central African Republic"           "Chad"                              
 [25] "Congo"                              "Democratic Republic of the Congo"  
 [27] "Equatorial Guinea"                  "Gabon"                             
 [29] "Sao Tome and Principe"              "Algeria"                           
 [31] "Egypt"                              "Libya"                             
 [33] "Morocco"                            "Sudan"                             
 [35] "Tunisia"                            "Western Sahara"                    
 [37] "Botswana"                           "Eswatini"                          
 [39] "Lesotho"                            "Namibia"                           
 [41] "South Africa"                       "Benin"                             
 [43] "Burkina Faso"                       "Cabo Verde"                        
 [45] "Côte d'Ivoire"                      "Gambia"                            
 [47] "Ghana"                              "Guinea"                            
 [49] "Guinea-Bissau"                      "Liberia"                           
 [51] "Mali"                               "Mauritania"                        
 [53] "Niger"                              "Nigeria"                           
 [55] "Saint Helena*"                      "Senegal"                           
 [57] "Sierra Leone"                       "Togo"                              
 [59] "Kazakhstan"                         "Kyrgyzstan"                        
 [61] "Tajikistan"                         "Turkmenistan"                      
 [63] "Uzbekistan"                         "China*"                            
 [65] "China, Hong Kong SAR*"              "China, Macao SAR*"                 
 [67] "China, Taiwan Province of China*"   "Dem. People's Republic of Korea"   
 [69] "Japan"                              "Mongolia"                          
 [71] "Republic of Korea"                  "Brunei Darussalam"                 
 [73] "Cambodia"                           "Indonesia"                         
 [75] "Lao People's Democratic Republic"   "Malaysia*"                         
 [77] "Myanmar"                            "Philippines"                       
 [79] "Singapore"                          "Thailand"                          
 [81] "Timor-Leste"                        "Viet Nam"                          
 [83] "Afghanistan"                        "Bangladesh"                        
 [85] "Bhutan"                             "India"                             
 [87] "Iran (Islamic Republic of)"         "Maldives"                          
 [89] "Nepal"                              "Pakistan"                          
 [91] "Sri Lanka"                          "Armenia"                           
 [93] "Azerbaijan*"                        "Bahrain"                           
 [95] "Cyprus*"                            "Georgia*"                          
 [97] "Iraq"                               "Israel"                            
 [99] "Jordan"                             "Kuwait"                            
[101] "Lebanon"                            "Oman"                              
[103] "Qatar"                              "Saudi Arabia"                      
[105] "State of Palestine*"                "Syrian Arab Republic"              
[107] "Turkey"                             "United Arab Emirates"              
[109] "Yemen"                              "Belarus"                           
[111] "Bulgaria"                           "Czechia"                           
[113] "Hungary"                            "Poland"                            
[115] "Republic of Moldova*"               "Romania"                           
[117] "Russian Federation"                 "Slovakia"                          
[119] "Ukraine*"                           "Channel Islands*"                  
[121] "Denmark*"                           "Estonia"                           
[123] "Faroe Islands*"                     "Finland*"                          
[125] "Iceland"                            "Ireland"                           
[127] "Isle of Man*"                       "Latvia"                            
[129] "Lithuania"                          "Norway*"                           
[131] "Sweden"                             "United Kingdom*"                   
[133] "Albania"                            "Andorra"                           
[135] "Bosnia and Herzegovina"             "Croatia"                           
[137] "Gibraltar*"                         "Greece"                            
[139] "Holy See*"                          "Italy"                             
[141] "Malta"                              "Montenegro"                        
[143] "North Macedonia"                    "Portugal"                          
[145] "San Marino"                         "Serbia*"                           
[147] "Slovenia"                           "Spain*"                            
[149] "Austria"                            "Belgium"                           
[151] "France*"                            "Germany"                           
[153] "Liechtenstein"                      "Luxembourg"                        
[155] "Monaco"                             "Netherlands*"                      
[157] "Switzerland"                        "Anguilla*"                         
[159] "Antigua and Barbuda"                "Aruba*"                            
[161] "Bahamas"                            "Barbados"                          
[163] "Bonaire, Sint Eustatius and Saba*"  "British Virgin Islands*"           
[165] "Cayman Islands*"                    "Cuba"                              
[167] "Curaçao*"                           "Dominica"                          
[169] "Dominican Republic"                 "Grenada"                           
[171] "Guadeloupe*"                        "Haiti"                             
[173] "Jamaica"                            "Martinique*"                       
[175] "Montserrat*"                        "Puerto Rico*"                      
[177] "Saint Barthélemy*"                  "Saint Kitts and Nevis"             
[179] "Saint Lucia"                        "Saint Martin (French part)*"       
[181] "Saint Vincent and the Grenadines"   "Sint Maarten (Dutch part)*"        
[183] "Trinidad and Tobago"                "Turks and Caicos Islands*"         
[185] "United States Virgin Islands*"      "Belize"                            
[187] "Costa Rica"                         "El Salvador"                       
[189] "Guatemala"                          "Honduras"                          
[191] "Mexico"                             "Nicaragua"                         
[193] "Panama"                             "Argentina"                         
[195] "Bolivia (Plurinational State of)"   "Brazil"                            
[197] "Chile"                              "Colombia"                          
[199] "Ecuador"                            "Falkland Islands (Malvinas)*"      
[201] "French Guiana*"                     "Guyana"                            
[203] "Paraguay"                           "Peru"                              
[205] "Suriname"                           "Uruguay"                           
[207] "Venezuela (Bolivarian Republic of)" "Bermuda*"                          
[209] "Canada"                             "Greenland*"                        
[211] "Saint Pierre and Miquelon*"         "United States of America*"         
[213] "Australia*"                         "New Zealand*"                      
[215] "Melanesia"                          "Fiji"                              
[217] "New Caledonia*"                     "Papua New Guinea"                  
[219] "Solomon Islands"                    "Vanuatu"                           
[221] "Micronesia"                         "Guam*"                             
[223] "Kiribati"                           "Marshall Islands"                  
[225] "Micronesia (Fed. States of)"        "Nauru"                             
[227] "Northern Mariana Islands*"          "Palau"                             
[229] "Polynesia*"                         "American Samoa*"                   
[231] "Cook Islands*"                      "French Polynesia*"                 
[233] "Niue*"                              "Samoa"                             
[235] "Tokelau*"                           "Tonga"                             
[237] "Tuvalu"                             "Wallis and Futuna Islands*"        </code></pre>
</div>
</div>
<p>Seems that I was able to keep only the individual countries.</p>
</section>
<section id="region_development_group_country_or_area_of_origin" class="level2">
<h2 class="anchored" data-anchor-id="region_development_group_country_or_area_of_origin"><code>region_development_group_country_or_area_of_origin</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(data<span class="sc">$</span>region_development_group_country_or_area_of_origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "WORLD"                                                      
  [2] "Sub-Saharan Africa"                                         
  [3] "Northern Africa and Western Asia"                           
  [4] "Central and Southern Asia"                                  
  [5] "Eastern and South-Eastern Asia"                             
  [6] "Latin America and the Caribbean"                            
  [7] "Oceania (excluding Australia and New Zealand)"              
  [8] "Australia and New Zealand"                                  
  [9] "Europe and Northern America"                                
 [10] "Developed regions"                                          
 [11] "Less developed regions"                                     
 [12] "Less developed regions, excluding least developed countries"
 [13] "Less developed regions, excluding China"                    
 [14] "Least developed countries"                                  
 [15] "Land-locked Developing Countries (LLDC)"                    
 [16] "Small island developing States (SIDS)"                      
 [17] "High-income countries"                                      
 [18] "Middle-income countries"                                    
 [19] "Upper-middle-income countries"                              
 [20] "Lower-middle-income countries"                              
 [21] "Low-income countries"                                       
 [22] "AFRICA"                                                     
 [23] "Eastern Africa"                                             
 [24] "Middle Africa"                                              
 [25] "Northern Africa"                                            
 [26] "Southern Africa"                                            
 [27] "Western Africa"                                             
 [28] "ASIA"                                                       
 [29] "Central Asia"                                               
 [30] "Eastern Asia"                                               
 [31] "South-Eastern Asia"                                         
 [32] "Southern Asia"                                              
 [33] "Western Asia"                                               
 [34] "EUROPE"                                                     
 [35] "Eastern Europe"                                             
 [36] "Northern Europe"                                            
 [37] "Southern Europe"                                            
 [38] "Western Europe"                                             
 [39] "LATIN AMERICA AND THE CARIBBEAN"                            
 [40] "Caribbean"                                                  
 [41] "Central America"                                            
 [42] "South America"                                              
 [43] "NORTHERN AMERICA"                                           
 [44] "OCEANIA"                                                    
 [45] "Melanesia"                                                  
 [46] "Micronesia"                                                 
 [47] "Polynesia*"                                                 
 [48] "Burundi"                                                    
 [49] "Comoros"                                                    
 [50] "Djibouti"                                                   
 [51] "Eritrea"                                                    
 [52] "Ethiopia"                                                   
 [53] "Kenya"                                                      
 [54] "Madagascar"                                                 
 [55] "Malawi"                                                     
 [56] "Mauritius*"                                                 
 [57] "Mayotte*"                                                   
 [58] "Mozambique"                                                 
 [59] "Réunion*"                                                   
 [60] "Rwanda"                                                     
 [61] "Seychelles"                                                 
 [62] "Somalia"                                                    
 [63] "South Sudan"                                                
 [64] "Uganda"                                                     
 [65] "United Republic of Tanzania*"                               
 [66] "Zambia"                                                     
 [67] "Zimbabwe"                                                   
 [68] "Angola"                                                     
 [69] "Cameroon"                                                   
 [70] "Central African Republic"                                   
 [71] "Chad"                                                       
 [72] "Congo"                                                      
 [73] "Democratic Republic of the Congo"                           
 [74] "Equatorial Guinea"                                          
 [75] "Gabon"                                                      
 [76] "Sao Tome and Principe"                                      
 [77] "Algeria"                                                    
 [78] "Egypt"                                                      
 [79] "Libya"                                                      
 [80] "Morocco"                                                    
 [81] "Sudan"                                                      
 [82] "Tunisia"                                                    
 [83] "Western Sahara"                                             
 [84] "Botswana"                                                   
 [85] "Eswatini"                                                   
 [86] "Lesotho"                                                    
 [87] "Namibia"                                                    
 [88] "South Africa"                                               
 [89] "Benin"                                                      
 [90] "Burkina Faso"                                               
 [91] "Cabo Verde"                                                 
 [92] "Côte d'Ivoire"                                              
 [93] "Gambia"                                                     
 [94] "Ghana"                                                      
 [95] "Guinea"                                                     
 [96] "Guinea-Bissau"                                              
 [97] "Liberia"                                                    
 [98] "Mali"                                                       
 [99] "Mauritania"                                                 
[100] "Niger"                                                      
[101] "Nigeria"                                                    
[102] "Saint Helena*"                                              
[103] "Senegal"                                                    
[104] "Sierra Leone"                                               
[105] "Togo"                                                       
[106] "Kazakhstan"                                                 
[107] "Kyrgyzstan"                                                 
[108] "Tajikistan"                                                 
[109] "Turkmenistan"                                               
[110] "Uzbekistan"                                                 
[111] "China*"                                                     
[112] "China, Hong Kong SAR*"                                      
[113] "China, Macao SAR*"                                          
[114] "China, Taiwan Province of China*"                           
[115] "Dem. People's Republic of Korea"                            
[116] "Japan"                                                      
[117] "Mongolia"                                                   
[118] "Republic of Korea"                                          
[119] "Brunei Darussalam"                                          
[120] "Cambodia"                                                   
[121] "Indonesia"                                                  
[122] "Lao People's Democratic Republic"                           
[123] "Malaysia*"                                                  
[124] "Myanmar"                                                    
[125] "Philippines"                                                
[126] "Singapore"                                                  
[127] "Thailand"                                                   
[128] "Timor-Leste"                                                
[129] "Viet Nam"                                                   
[130] "Afghanistan"                                                
[131] "Bangladesh"                                                 
[132] "Bhutan"                                                     
[133] "India"                                                      
[134] "Iran (Islamic Republic of)"                                 
[135] "Maldives"                                                   
[136] "Nepal"                                                      
[137] "Pakistan"                                                   
[138] "Sri Lanka"                                                  
[139] "Armenia"                                                    
[140] "Azerbaijan*"                                                
[141] "Bahrain"                                                    
[142] "Cyprus*"                                                    
[143] "Georgia*"                                                   
[144] "Iraq"                                                       
[145] "Israel"                                                     
[146] "Jordan"                                                     
[147] "Kuwait"                                                     
[148] "Lebanon"                                                    
[149] "Oman"                                                       
[150] "Qatar"                                                      
[151] "Saudi Arabia"                                               
[152] "State of Palestine*"                                        
[153] "Syrian Arab Republic"                                       
[154] "Turkey"                                                     
[155] "United Arab Emirates"                                       
[156] "Yemen"                                                      
[157] "Belarus"                                                    
[158] "Bulgaria"                                                   
[159] "Czechia"                                                    
[160] "Hungary"                                                    
[161] "Poland"                                                     
[162] "Republic of Moldova*"                                       
[163] "Romania"                                                    
[164] "Russian Federation"                                         
[165] "Slovakia"                                                   
[166] "Ukraine*"                                                   
[167] "Channel Islands*"                                           
[168] "Denmark*"                                                   
[169] "Estonia"                                                    
[170] "Faroe Islands*"                                             
[171] "Finland*"                                                   
[172] "Iceland"                                                    
[173] "Ireland"                                                    
[174] "Isle of Man*"                                               
[175] "Latvia"                                                     
[176] "Lithuania"                                                  
[177] "Norway*"                                                    
[178] "Sweden"                                                     
[179] "United Kingdom*"                                            
[180] "Albania"                                                    
[181] "Andorra"                                                    
[182] "Bosnia and Herzegovina"                                     
[183] "Croatia"                                                    
[184] "Gibraltar*"                                                 
[185] "Greece"                                                     
[186] "Holy See*"                                                  
[187] "Italy"                                                      
[188] "Malta"                                                      
[189] "Montenegro"                                                 
[190] "North Macedonia"                                            
[191] "Portugal"                                                   
[192] "San Marino"                                                 
[193] "Serbia*"                                                    
[194] "Slovenia"                                                   
[195] "Spain*"                                                     
[196] "Austria"                                                    
[197] "Belgium"                                                    
[198] "France*"                                                    
[199] "Germany"                                                    
[200] "Liechtenstein"                                              
[201] "Luxembourg"                                                 
[202] "Monaco"                                                     
[203] "Netherlands*"                                               
[204] "Switzerland"                                                
[205] "Anguilla*"                                                  
[206] "Antigua and Barbuda"                                        
[207] "Aruba*"                                                     
[208] "Bahamas"                                                    
[209] "Barbados"                                                   
[210] "Bonaire, Sint Eustatius and Saba*"                          
[211] "British Virgin Islands*"                                    
[212] "Cayman Islands*"                                            
[213] "Cuba"                                                       
[214] "Curaçao*"                                                   
[215] "Dominica"                                                   
[216] "Dominican Republic"                                         
[217] "Grenada"                                                    
[218] "Guadeloupe*"                                                
[219] "Haiti"                                                      
[220] "Jamaica"                                                    
[221] "Martinique*"                                                
[222] "Montserrat*"                                                
[223] "Puerto Rico*"                                               
[224] "Saint Barthélemy*"                                          
[225] "Saint Kitts and Nevis"                                      
[226] "Saint Lucia"                                                
[227] "Saint Martin (French part)*"                                
[228] "Saint Vincent and the Grenadines"                           
[229] "Sint Maarten (Dutch part)*"                                 
[230] "Trinidad and Tobago"                                        
[231] "Turks and Caicos Islands*"                                  
[232] "United States Virgin Islands*"                              
[233] "Belize"                                                     
[234] "Costa Rica"                                                 
[235] "El Salvador"                                                
[236] "Guatemala"                                                  
[237] "Honduras"                                                   
[238] "Mexico"                                                     
[239] "Nicaragua"                                                  
[240] "Panama"                                                     
[241] "Argentina"                                                  
[242] "Bolivia (Plurinational State of)"                           
[243] "Brazil"                                                     
[244] "Chile"                                                      
[245] "Colombia"                                                   
[246] "Ecuador"                                                    
[247] "Falkland Islands (Malvinas)*"                               
[248] "French Guiana*"                                             
[249] "Guyana"                                                     
[250] "Paraguay"                                                   
[251] "Peru"                                                       
[252] "Suriname"                                                   
[253] "Uruguay"                                                    
[254] "Venezuela (Bolivarian Republic of)"                         
[255] "Bermuda*"                                                   
[256] "Canada"                                                     
[257] "Greenland*"                                                 
[258] "Saint Pierre and Miquelon*"                                 
[259] "United States of America*"                                  
[260] "Australia*"                                                 
[261] "New Zealand*"                                               
[262] "Fiji"                                                       
[263] "New Caledonia*"                                             
[264] "Papua New Guinea"                                           
[265] "Solomon Islands"                                            
[266] "Vanuatu"                                                    
[267] "Guam*"                                                      
[268] "Kiribati"                                                   
[269] "Marshall Islands"                                           
[270] "Micronesia (Fed. States of)"                                
[271] "Nauru"                                                      
[272] "Northern Mariana Islands*"                                  
[273] "Palau"                                                      
[274] "American Samoa*"                                            
[275] "Cook Islands*"                                              
[276] "French Polynesia*"                                          
[277] "Niue*"                                                      
[278] "Samoa"                                                      
[279] "Tokelau*"                                                   
[280] "Tonga"                                                      
[281] "Tuvalu"                                                     
[282] "Wallis and Futuna Islands*"                                 
[283] "Other"                                                      </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>region_development_group_country_or_area_of_origin <span class="sc">%in%</span> names_all) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_origin) <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Melanesia"                          "Micronesia"                        
  [3] "Polynesia*"                         "Burundi"                           
  [5] "Comoros"                            "Djibouti"                          
  [7] "Eritrea"                            "Ethiopia"                          
  [9] "Kenya"                              "Madagascar"                        
 [11] "Malawi"                             "Mauritius*"                        
 [13] "Mayotte*"                           "Mozambique"                        
 [15] "Réunion*"                           "Rwanda"                            
 [17] "Seychelles"                         "Somalia"                           
 [19] "South Sudan"                        "Uganda"                            
 [21] "United Republic of Tanzania*"       "Zambia"                            
 [23] "Zimbabwe"                           "Angola"                            
 [25] "Cameroon"                           "Central African Republic"          
 [27] "Chad"                               "Congo"                             
 [29] "Democratic Republic of the Congo"   "Equatorial Guinea"                 
 [31] "Gabon"                              "Sao Tome and Principe"             
 [33] "Algeria"                            "Egypt"                             
 [35] "Libya"                              "Morocco"                           
 [37] "Sudan"                              "Tunisia"                           
 [39] "Western Sahara"                     "Botswana"                          
 [41] "Eswatini"                           "Lesotho"                           
 [43] "Namibia"                            "South Africa"                      
 [45] "Benin"                              "Burkina Faso"                      
 [47] "Cabo Verde"                         "Côte d'Ivoire"                     
 [49] "Gambia"                             "Ghana"                             
 [51] "Guinea"                             "Guinea-Bissau"                     
 [53] "Liberia"                            "Mali"                              
 [55] "Mauritania"                         "Niger"                             
 [57] "Nigeria"                            "Saint Helena*"                     
 [59] "Senegal"                            "Sierra Leone"                      
 [61] "Togo"                               "Kazakhstan"                        
 [63] "Kyrgyzstan"                         "Tajikistan"                        
 [65] "Turkmenistan"                       "Uzbekistan"                        
 [67] "China*"                             "China, Hong Kong SAR*"             
 [69] "China, Macao SAR*"                  "China, Taiwan Province of China*"  
 [71] "Dem. People's Republic of Korea"    "Japan"                             
 [73] "Mongolia"                           "Republic of Korea"                 
 [75] "Brunei Darussalam"                  "Cambodia"                          
 [77] "Indonesia"                          "Lao People's Democratic Republic"  
 [79] "Malaysia*"                          "Myanmar"                           
 [81] "Philippines"                        "Singapore"                         
 [83] "Thailand"                           "Timor-Leste"                       
 [85] "Viet Nam"                           "Afghanistan"                       
 [87] "Bangladesh"                         "Bhutan"                            
 [89] "India"                              "Iran (Islamic Republic of)"        
 [91] "Maldives"                           "Nepal"                             
 [93] "Pakistan"                           "Sri Lanka"                         
 [95] "Armenia"                            "Azerbaijan*"                       
 [97] "Bahrain"                            "Cyprus*"                           
 [99] "Georgia*"                           "Iraq"                              
[101] "Israel"                             "Jordan"                            
[103] "Kuwait"                             "Lebanon"                           
[105] "Oman"                               "Qatar"                             
[107] "Saudi Arabia"                       "State of Palestine*"               
[109] "Syrian Arab Republic"               "Turkey"                            
[111] "United Arab Emirates"               "Yemen"                             
[113] "Belarus"                            "Bulgaria"                          
[115] "Czechia"                            "Hungary"                           
[117] "Poland"                             "Republic of Moldova*"              
[119] "Romania"                            "Russian Federation"                
[121] "Slovakia"                           "Ukraine*"                          
[123] "Channel Islands*"                   "Denmark*"                          
[125] "Estonia"                            "Faroe Islands*"                    
[127] "Finland*"                           "Iceland"                           
[129] "Ireland"                            "Isle of Man*"                      
[131] "Latvia"                             "Lithuania"                         
[133] "Norway*"                            "Sweden"                            
[135] "United Kingdom*"                    "Albania"                           
[137] "Andorra"                            "Bosnia and Herzegovina"            
[139] "Croatia"                            "Gibraltar*"                        
[141] "Greece"                             "Holy See*"                         
[143] "Italy"                              "Malta"                             
[145] "Montenegro"                         "North Macedonia"                   
[147] "Portugal"                           "San Marino"                        
[149] "Serbia*"                            "Slovenia"                          
[151] "Spain*"                             "Austria"                           
[153] "Belgium"                            "France*"                           
[155] "Germany"                            "Liechtenstein"                     
[157] "Luxembourg"                         "Monaco"                            
[159] "Netherlands*"                       "Switzerland"                       
[161] "Anguilla*"                          "Antigua and Barbuda"               
[163] "Aruba*"                             "Bahamas"                           
[165] "Barbados"                           "Bonaire, Sint Eustatius and Saba*" 
[167] "British Virgin Islands*"            "Cayman Islands*"                   
[169] "Cuba"                               "Curaçao*"                          
[171] "Dominica"                           "Dominican Republic"                
[173] "Grenada"                            "Guadeloupe*"                       
[175] "Haiti"                              "Jamaica"                           
[177] "Martinique*"                        "Montserrat*"                       
[179] "Puerto Rico*"                       "Saint Barthélemy*"                 
[181] "Saint Kitts and Nevis"              "Saint Lucia"                       
[183] "Saint Martin (French part)*"        "Saint Vincent and the Grenadines"  
[185] "Sint Maarten (Dutch part)*"         "Trinidad and Tobago"               
[187] "Turks and Caicos Islands*"          "United States Virgin Islands*"     
[189] "Belize"                             "Costa Rica"                        
[191] "El Salvador"                        "Guatemala"                         
[193] "Honduras"                           "Mexico"                            
[195] "Nicaragua"                          "Panama"                            
[197] "Argentina"                          "Bolivia (Plurinational State of)"  
[199] "Brazil"                             "Chile"                             
[201] "Colombia"                           "Ecuador"                           
[203] "Falkland Islands (Malvinas)*"       "French Guiana*"                    
[205] "Guyana"                             "Paraguay"                          
[207] "Peru"                               "Suriname"                          
[209] "Uruguay"                            "Venezuela (Bolivarian Republic of)"
[211] "Bermuda*"                           "Canada"                            
[213] "Greenland*"                         "Saint Pierre and Miquelon*"        
[215] "United States of America*"          "Australia*"                        
[217] "New Zealand*"                       "Fiji"                              
[219] "New Caledonia*"                     "Papua New Guinea"                  
[221] "Solomon Islands"                    "Vanuatu"                           
[223] "Guam*"                              "Kiribati"                          
[225] "Marshall Islands"                   "Micronesia (Fed. States of)"       
[227] "Nauru"                              "Northern Mariana Islands*"         
[229] "Palau"                              "American Samoa*"                   
[231] "Cook Islands*"                      "French Polynesia*"                 
[233] "Niue*"                              "Samoa"                             
[235] "Tokelau*"                           "Tonga"                             
[237] "Tuvalu"                             "Wallis and Futuna Islands*"        
[239] "Other"                             </code></pre>
</div>
</div>
<p>Compared to <code>region_development_group_country_or_area_of_destination</code>, it seems to have one extra value–“Other”.Actually checking.</p>
</section>
<section id="differences-between-region_development_group_country_or_area_of_destination-and-region_development_group_country_or_area_of_origin" class="level2">
<h2 class="anchored" data-anchor-id="differences-between-region_development_group_country_or_area_of_destination-and-region_development_group_country_or_area_of_origin">Differences between <code>region_development_group_country_or_area_of_destination</code> and <code>region_development_group_country_or_area_of_origin</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>unique_destination <span class="ot">&lt;-</span> <span class="fu">unique</span>(data<span class="sc">$</span>region_development_group_country_or_area_of_destination)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>unique_origin <span class="ot">&lt;-</span> <span class="fu">unique</span>(data<span class="sc">$</span>region_development_group_country_or_area_of_origin)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>only_in_destinations <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(unique_destination, unique_origin)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>only_in_origins <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(unique_origin, unique_destination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>only_in_destinations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>only_in_origins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Other"</code></pre>
</div>
</div>
<p>Indeed. Investigating those rows.</p>
</section>
<section id="investigating-rows-where-region_development_group_country_or_area_of_origin-is-other" class="level2">
<h2 class="anchored" data-anchor-id="investigating-rows-where-region_development_group_country_or_area_of_origin-is-other">Investigating rows where <code>region_development_group_country_or_area_of_origin</code> is Other</h2>
<p>No note about it in Notes or methodology doc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data_subset_origin_other <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_development_group_country_or_area_of_origin <span class="sc">==</span> <span class="st">"Other"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data_subset_origin_other <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(location_code_of_origin) <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2003</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>data_subset_origin_other <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_destination) <span class="sc">%&gt;%</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Burundi"                            "Comoros"                           
  [3] "Djibouti"                           "Eritrea"                           
  [5] "Ethiopia"                           "Kenya"                             
  [7] "Madagascar"                         "Malawi"                            
  [9] "Mauritius*"                         "Mayotte*"                          
 [11] "Mozambique"                         "Réunion*"                          
 [13] "Rwanda"                             "Seychelles"                        
 [15] "Somalia"                            "South Sudan"                       
 [17] "Uganda"                             "United Republic of Tanzania*"      
 [19] "Zambia"                             "Zimbabwe"                          
 [21] "Angola"                             "Cameroon"                          
 [23] "Central African Republic"           "Chad"                              
 [25] "Congo"                              "Democratic Republic of the Congo"  
 [27] "Equatorial Guinea"                  "Gabon"                             
 [29] "Sao Tome and Principe"              "Algeria"                           
 [31] "Egypt"                              "Morocco"                           
 [33] "Sudan"                              "Tunisia"                           
 [35] "Western Sahara"                     "Botswana"                          
 [37] "Eswatini"                           "Lesotho"                           
 [39] "Namibia"                            "South Africa"                      
 [41] "Benin"                              "Burkina Faso"                      
 [43] "Cabo Verde"                         "Côte d'Ivoire"                     
 [45] "Gambia"                             "Ghana"                             
 [47] "Guinea"                             "Guinea-Bissau"                     
 [49] "Liberia"                            "Mali"                              
 [51] "Mauritania"                         "Niger"                             
 [53] "Nigeria"                            "Saint Helena*"                     
 [55] "Senegal"                            "Sierra Leone"                      
 [57] "Togo"                               "Kazakhstan"                        
 [59] "Kyrgyzstan"                         "Tajikistan"                        
 [61] "Turkmenistan"                       "Uzbekistan"                        
 [63] "China*"                             "China, Hong Kong SAR*"             
 [65] "China, Macao SAR*"                  "Dem. People's Republic of Korea"   
 [67] "Japan"                              "Mongolia"                          
 [69] "Republic of Korea"                  "Brunei Darussalam"                 
 [71] "Cambodia"                           "Indonesia"                         
 [73] "Lao People's Democratic Republic"   "Malaysia*"                         
 [75] "Myanmar"                            "Philippines"                       
 [77] "Singapore"                          "Thailand"                          
 [79] "Timor-Leste"                        "Viet Nam"                          
 [81] "Afghanistan"                        "Bangladesh"                        
 [83] "Bhutan"                             "India"                             
 [85] "Iran (Islamic Republic of)"         "Maldives"                          
 [87] "Nepal"                              "Pakistan"                          
 [89] "Sri Lanka"                          "Armenia"                           
 [91] "Azerbaijan*"                        "Bahrain"                           
 [93] "Cyprus*"                            "Georgia*"                          
 [95] "Iraq"                               "Israel"                            
 [97] "Jordan"                             "Kuwait"                            
 [99] "Lebanon"                            "Oman"                              
[101] "Qatar"                              "Saudi Arabia"                      
[103] "State of Palestine*"                "Syrian Arab Republic"              
[105] "Turkey"                             "United Arab Emirates"              
[107] "Yemen"                              "Belarus"                           
[109] "Bulgaria"                           "Czechia"                           
[111] "Hungary"                            "Poland"                            
[113] "Republic of Moldova*"               "Romania"                           
[115] "Russian Federation"                 "Slovakia"                          
[117] "Ukraine*"                           "Channel Islands*"                  
[119] "Denmark*"                           "Estonia"                           
[121] "Faroe Islands*"                     "Finland*"                          
[123] "Iceland"                            "Isle of Man*"                      
[125] "Latvia"                             "Lithuania"                         
[127] "Norway*"                            "Sweden"                            
[129] "United Kingdom*"                    "Albania"                           
[131] "Andorra"                            "Bosnia and Herzegovina"            
[133] "Croatia"                            "Gibraltar*"                        
[135] "Holy See*"                          "Italy"                             
[137] "Malta"                              "Montenegro"                        
[139] "North Macedonia"                    "Portugal"                          
[141] "San Marino"                         "Serbia*"                           
[143] "Slovenia"                           "Spain*"                            
[145] "Belgium"                            "Germany"                           
[147] "Liechtenstein"                      "Luxembourg"                        
[149] "Monaco"                             "Netherlands*"                      
[151] "Switzerland"                        "Anguilla*"                         
[153] "Antigua and Barbuda"                "Aruba*"                            
[155] "Bahamas"                            "Barbados"                          
[157] "Bonaire, Sint Eustatius and Saba*"  "British Virgin Islands*"           
[159] "Cayman Islands*"                    "Cuba"                              
[161] "Curaçao*"                           "Dominica"                          
[163] "Dominican Republic"                 "Grenada"                           
[165] "Guadeloupe*"                        "Haiti"                             
[167] "Jamaica"                            "Martinique*"                       
[169] "Montserrat*"                        "Puerto Rico*"                      
[171] "Saint Kitts and Nevis"              "Saint Lucia"                       
[173] "Saint Vincent and the Grenadines"   "Sint Maarten (Dutch part)*"        
[175] "Trinidad and Tobago"                "Turks and Caicos Islands*"         
[177] "United States Virgin Islands*"      "Belize"                            
[179] "Costa Rica"                         "El Salvador"                       
[181] "Guatemala"                          "Honduras"                          
[183] "Mexico"                             "Nicaragua"                         
[185] "Panama"                             "Argentina"                         
[187] "Bolivia (Plurinational State of)"   "Brazil"                            
[189] "Chile"                              "Colombia"                          
[191] "Ecuador"                            "Falkland Islands (Malvinas)*"      
[193] "French Guiana*"                     "Guyana"                            
[195] "Paraguay"                           "Peru"                              
[197] "Suriname"                           "Uruguay"                           
[199] "Venezuela (Bolivarian Republic of)" "Bermuda*"                          
[201] "Canada"                             "Greenland*"                        
[203] "Saint Pierre and Miquelon*"         "United States of America*"         
[205] "Australia*"                         "New Zealand*"                      
[207] "Fiji"                               "New Caledonia*"                    
[209] "Papua New Guinea"                   "Solomon Islands"                   
[211] "Vanuatu"                            "Guam*"                             
[213] "Kiribati"                           "Marshall Islands"                  
[215] "Micronesia (Fed. States of)"        "Nauru"                             
[217] "Northern Mariana Islands*"          "Palau"                             
[219] "American Samoa*"                    "Cook Islands*"                     
[221] "French Polynesia*"                  "Niue*"                             
[223] "Samoa"                              "Tokelau*"                          
[225] "Tonga"                              "Tuvalu"                            
[227] "Wallis and Futuna Islands*"        </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>data_subset_origin_other <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(location_code_of_destination) <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 108 174 262 232 231 404 450 454 480 175 508 638 646 690 706 728 800 834
 [19] 894 716  24 120 140 148 178 180 226 266 678  12 818 504 729 788 732  72
 [37] 748 426 516 710 204 854 132 384 270 288 324 624 430 466 478 562 566 654
 [55] 686 694 768 398 417 762 795 860 156 344 446 408 392 496 410  96 116 360
 [73] 418 458 104 608 702 764 626 704   4  50  64 356 364 462 524 586 144  51
 [91]  31  48 196 268 368 376 400 414 422 512 634 682 275 760 792 784 887 112
[109] 100 203 348 616 498 642 643 703 804 830 208 233 234 246 352 833 428 440
[127] 578 752 826   8  20  70 191 292 336 380 470 499 807 620 674 688 705 724
[145]  56 276 438 442 492 528 756 660  28 533  44  52 535  92 136 192 531 212
[163] 214 308 312 332 388 474 500 630 659 662 670 534 780 796 850  84 188 222
[181] 320 340 484 558 591  32  68  76 152 170 218 238 254 328 600 604 740 858
[199] 862  60 124 304 666 840  36 554 242 540 598  90 548 316 296 584 583 520
[217] 580 585  16 184 258 570 882 772 776 798 876</code></pre>
</div>
</div>
<p>Unclear.</p>
</section>
</section>
<section id="checking-unique-values-of-codes" class="level1">
<h1>Checking unique values of codes</h1>
<section id="differences-between-location_code_of_destination-and-location_code_of_origin" class="level2">
<h2 class="anchored" data-anchor-id="differences-between-location_code_of_destination-and-location_code_of_origin">Differences between <code>location_code_of_destination</code> and <code>location_code_of_origin</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>unique_destination <span class="ot">&lt;-</span> <span class="fu">unique</span>(data<span class="sc">$</span>location_code_of_destination)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>unique_origin <span class="ot">&lt;-</span> <span class="fu">unique</span>(data<span class="sc">$</span>location_code_of_origin)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>only_in_destinations <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(unique_destination, unique_origin)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>only_in_origins <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(unique_origin, unique_destination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>only_in_destinations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>only_in_origins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2003</code></pre>
</div>
</div>
<p>It’s the “Other”.</p>
</section>
</section>
<section id="looking-at-distribution-of-migrant-stock" class="level1">
<h1>Looking at distribution of migrant stock</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>Hmisc<span class="sc">::</span><span class="fu">describe</span>(data <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"stock"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data %&gt;% select(starts_with("stock")) 

 7  Variables      37051  Observations
--------------------------------------------------------------------------------
stock_1990 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   26600    10451    11833        1   412249   790707        5       15 
     .25      .50      .75      .90      .95 
     109     1468    26453   281590   917185 

lowest :         1         2         3         4         5
highest:  82767210  87652367  88958999  92519577 152986157
--------------------------------------------------------------------------------
stock_1995 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   26946    10105    12314        1   425476   815186        6       18 
     .25      .50      .75      .90      .95 
     129     1726    29030   294517   942244 

lowest :         1         2         3         4         5
highest:  92935093  95081133  98929758 100818788 161289976
--------------------------------------------------------------------------------
stock_2000 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   27005    10046    12563        1   453424   868726        8       22 
     .25      .50      .75      .90      .95 
     153     1947    31667   319167  1011819 

lowest :         1         2         3         4         5
highest: 103962010 105043210 109879954 111708559 173230585
--------------------------------------------------------------------------------
stock_2005 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   27355     9696    12920        1   493129   944403       10       26 
     .25      .50      .75      .90      .95 
     171     2134    35862   355260  1178009 

lowest :         1         2         3         4         5
highest: 118876449 119026154 123912679 127074327 191446828
--------------------------------------------------------------------------------
stock_2010 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   28076     8975    13384        1   558333  1070864       10       27 
     .25      .50      .75      .90      .95 
     175     2192    37591   385703  1323519 

lowest :         1         2         3         4         5
highest: 141938473 142642749 144581899 151638790 220983187
--------------------------------------------------------------------------------
stock_2015 
        n   missing  distinct      Info      Mean       Gmd       .05       .10 
    28824      8227     13632         1    613890   1178424       7.0      22.0 
      .25       .50       .75       .90       .95 
    160.8    2166.0   39063.0  421348.9 1454410.3 

lowest :         1         2         3         4         5
highest: 157981964 158516311 163095388 174426790 247958644
--------------------------------------------------------------------------------
stock_2020 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   28689     8362    13998        1   700652  1343840        9       28 
     .25      .50      .75      .90      .95 
     200     2558    45288   499723  1704718 

lowest :         1         2         3         4         5
highest: 177395834 181897756 186511434 198125584 280598105
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>Very skewed distributions.</p>
</section>
<section id="filtering-data-for-the-us" class="level1">
<h1>Filtering data for the US</h1>
<p>From the methodology PDF: “The three-digit codes for countries or areas are those established by the International Standards Organization (ISO). For regional groupings, the codes presented are those used by the Population Division.”</p>
<p>https://www.iban.com/country-codes</p>
<p>US is 840</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(location_code_of_destination <span class="sc">==</span> <span class="st">"840"</span> <span class="sc">|</span> location_code_of_origin <span class="sc">==</span> <span class="st">"840"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_subset_us)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 409  12</code></pre>
</div>
</div>
<section id="exploring-the-countries-available" class="level2">
<h2 class="anchored" data-anchor-id="exploring-the-countries-available">Exploring the countries available</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Countries where there are Americans</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>countries_destination <span class="ot">&lt;-</span> data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin <span class="sc">%in%</span> names_all</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_destination) <span class="sc">%&gt;%</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_development_group_country_or_area_of_destination <span class="sc">!=</span> <span class="st">"United States of America*"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="co"># Not necessary, but just being clear</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Countries for which there are immigrants in the US</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>countries_origin <span class="ot">&lt;-</span> data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin <span class="sc">%in%</span> names_all</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_origin) <span class="sc">%&gt;%</span> </span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_development_group_country_or_area_of_origin <span class="sc">!=</span> <span class="st">"United States of America*"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="co"># Not necessary, but just being clear</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>only_in_destinations <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(countries_destination, countries_origin)</span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a>only_in_origins <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(countries_origin, countries_destination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>countries_destination</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Mauritius*"                         "Uganda"                            
  [3] "United Republic of Tanzania*"       "Zambia"                            
  [5] "Cameroon"                           "Central African Republic"          
  [7] "Congo"                              "Gabon"                             
  [9] "Algeria"                            "Egypt"                             
 [11] "Libya"                              "Morocco"                           
 [13] "Tunisia"                            "Botswana"                          
 [15] "Eswatini"                           "Lesotho"                           
 [17] "Namibia"                            "South Africa"                      
 [19] "Cabo Verde"                         "Ghana"                             
 [21] "Guinea"                             "Guinea-Bissau"                     
 [23] "Liberia"                            "Mali"                              
 [25] "Mauritania"                         "Senegal"                           
 [27] "Sierra Leone"                       "Togo"                              
 [29] "Tajikistan"                         "China*"                            
 [31] "China, Hong Kong SAR*"              "Dem. People's Republic of Korea"   
 [33] "Japan"                              "Mongolia"                          
 [35] "Republic of Korea"                  "Brunei Darussalam"                 
 [37] "Cambodia"                           "Indonesia"                         
 [39] "Philippines"                        "Singapore"                         
 [41] "Thailand"                           "Timor-Leste"                       
 [43] "Viet Nam"                           "Bangladesh"                        
 [45] "Bhutan"                             "India"                             
 [47] "Maldives"                           "Sri Lanka"                         
 [49] "Bahrain"                            "Cyprus*"                           
 [51] "Georgia*"                           "Israel"                            
 [53] "Jordan"                             "Kuwait"                            
 [55] "Lebanon"                            "Qatar"                             
 [57] "State of Palestine*"                "Turkey"                            
 [59] "United Arab Emirates"               "Belarus"                           
 [61] "Bulgaria"                           "Czechia"                           
 [63] "Hungary"                            "Poland"                            
 [65] "Romania"                            "Russian Federation"                
 [67] "Slovakia"                           "Ukraine*"                          
 [69] "Denmark*"                           "Estonia"                           
 [71] "Faroe Islands*"                     "Finland*"                          
 [73] "Iceland"                            "Ireland"                           
 [75] "Isle of Man*"                       "Latvia"                            
 [77] "Lithuania"                          "Norway*"                           
 [79] "Sweden"                             "United Kingdom*"                   
 [81] "Albania"                            "Andorra"                           
 [83] "Croatia"                            "Greece"                            
 [85] "Italy"                              "Malta"                             
 [87] "Montenegro"                         "Portugal"                          
 [89] "Serbia*"                            "Slovenia"                          
 [91] "Spain*"                             "Austria"                           
 [93] "Belgium"                            "France*"                           
 [95] "Germany"                            "Liechtenstein"                     
 [97] "Luxembourg"                         "Netherlands*"                      
 [99] "Switzerland"                        "Anguilla*"                         
[101] "Antigua and Barbuda"                "Aruba*"                            
[103] "Bahamas"                            "Barbados"                          
[105] "Bonaire, Sint Eustatius and Saba*"  "British Virgin Islands*"           
[107] "Cayman Islands*"                    "Cuba"                              
[109] "Curaçao*"                           "Dominica"                          
[111] "Dominican Republic"                 "Guadeloupe*"                       
[113] "Haiti"                              "Jamaica"                           
[115] "Montserrat*"                        "Puerto Rico*"                      
[117] "Saint Lucia"                        "Saint Vincent and the Grenadines"  
[119] "Sint Maarten (Dutch part)*"         "Trinidad and Tobago"               
[121] "Turks and Caicos Islands*"          "United States Virgin Islands*"     
[123] "Belize"                             "Costa Rica"                        
[125] "El Salvador"                        "Guatemala"                         
[127] "Honduras"                           "Mexico"                            
[129] "Nicaragua"                          "Panama"                            
[131] "Argentina"                          "Bolivia (Plurinational State of)"  
[133] "Brazil"                             "Chile"                             
[135] "Colombia"                           "Ecuador"                           
[137] "Falkland Islands (Malvinas)*"       "Guyana"                            
[139] "Paraguay"                           "Peru"                              
[141] "Uruguay"                            "Venezuela (Bolivarian Republic of)"
[143] "Bermuda*"                           "Canada"                            
[145] "Greenland*"                         "Saint Pierre and Miquelon*"        
[147] "Australia*"                         "New Zealand*"                      
[149] "Melanesia"                          "Papua New Guinea"                  
[151] "Solomon Islands"                    "Micronesia"                        
[153] "Guam*"                              "Kiribati"                          
[155] "Marshall Islands"                   "Micronesia (Fed. States of)"       
[157] "Northern Mariana Islands*"          "Palau"                             
[159] "Polynesia*"                         "American Samoa*"                   
[161] "Cook Islands*"                      "French Polynesia*"                 
[163] "Niue*"                              "Samoa"                             
[165] "Tuvalu"                            </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>countries_origin</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Melanesia"                          "Micronesia"                        
  [3] "Polynesia*"                         "Afghanistan"                       
  [5] "Albania"                            "Algeria"                           
  [7] "Angola"                             "Antigua and Barbuda"               
  [9] "Argentina"                          "Armenia"                           
 [11] "Aruba*"                             "Australia*"                        
 [13] "Austria"                            "Azerbaijan*"                       
 [15] "Bahamas"                            "Bangladesh"                        
 [17] "Barbados"                           "Belarus"                           
 [19] "Belgium"                            "Belize"                            
 [21] "Bermuda*"                           "Bolivia (Plurinational State of)"  
 [23] "Bosnia and Herzegovina"             "Brazil"                            
 [25] "Bulgaria"                           "Cambodia"                          
 [27] "Cameroon"                           "Canada"                            
 [29] "Cabo Verde"                         "Chile"                             
 [31] "China*"                             "China, Hong Kong SAR*"             
 [33] "China, Macao SAR*"                  "Colombia"                          
 [35] "Costa Rica"                         "Côte d'Ivoire"                     
 [37] "Croatia"                            "Cuba"                              
 [39] "Cyprus*"                            "Czechia"                           
 [41] "Democratic Republic of the Congo"   "Denmark*"                          
 [43] "Dominica"                           "Dominican Republic"                
 [45] "Ecuador"                            "Egypt"                             
 [47] "El Salvador"                        "Eritrea"                           
 [49] "Estonia"                            "Ethiopia"                          
 [51] "Fiji"                               "Finland*"                          
 [53] "France*"                            "Gambia"                            
 [55] "Georgia*"                           "Germany"                           
 [57] "Ghana"                              "Greece"                            
 [59] "Grenada"                            "Guatemala"                         
 [61] "Guinea"                             "Guyana"                            
 [63] "Haiti"                              "Honduras"                          
 [65] "Hungary"                            "Iceland"                           
 [67] "India"                              "Indonesia"                         
 [69] "Iran (Islamic Republic of)"         "Iraq"                              
 [71] "Ireland"                            "Israel"                            
 [73] "Italy"                              "Jamaica"                           
 [75] "Japan"                              "Jordan"                            
 [77] "Kazakhstan"                         "Kenya"                             
 [79] "Kuwait"                             "Kyrgyzstan"                        
 [81] "Lao People's Democratic Republic"   "Latvia"                            
 [83] "Lebanon"                            "Liberia"                           
 [85] "Libya"                              "Lithuania"                         
 [87] "Luxembourg"                         "Malaysia*"                         
 [89] "Malta"                              "Marshall Islands"                  
 [91] "Mexico"                             "Micronesia (Fed. States of)"       
 [93] "Montserrat*"                        "Morocco"                           
 [95] "Myanmar"                            "Nepal"                             
 [97] "Netherlands*"                       "New Zealand*"                      
 [99] "Nicaragua"                          "Nigeria"                           
[101] "Norway*"                            "Pakistan"                          
[103] "Panama"                             "Paraguay"                          
[105] "Peru"                               "Philippines"                       
[107] "Poland"                             "Portugal"                          
[109] "Republic of Korea"                  "Republic of Moldova*"              
[111] "Romania"                            "Russian Federation"                
[113] "Saint Kitts and Nevis"              "Saint Lucia"                       
[115] "Saint Vincent and the Grenadines"   "Samoa"                             
[117] "Saudi Arabia"                       "Senegal"                           
[119] "Serbia*"                            "Sierra Leone"                      
[121] "Singapore"                          "Slovenia"                          
[123] "Somalia"                            "South Africa"                      
[125] "Spain*"                             "Sri Lanka"                         
[127] "State of Palestine*"                "Sudan"                             
[129] "Suriname"                           "Sweden"                            
[131] "Switzerland"                        "Syrian Arab Republic"              
[133] "Tajikistan"                         "Thailand"                          
[135] "North Macedonia"                    "Tonga"                             
[137] "Trinidad and Tobago"                "Tunisia"                           
[139] "Turkey"                             "Turkmenistan"                      
[141] "Uganda"                             "Ukraine*"                          
[143] "United Arab Emirates"               "United Kingdom*"                   
[145] "United Republic of Tanzania*"       "Uruguay"                           
[147] "Uzbekistan"                         "Venezuela (Bolivarian Republic of)"
[149] "Viet Nam"                           "Yemen"                             
[151] "Zambia"                             "Zimbabwe"                          
[153] "Puerto Rico*"                       "Other"                             </code></pre>
</div>
</div>
<p>165 v 154 (including “Other”). I assume those 11 are missing data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>only_in_destinations</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Mauritius*"                        "Central African Republic"         
 [3] "Congo"                             "Gabon"                            
 [5] "Botswana"                          "Eswatini"                         
 [7] "Lesotho"                           "Namibia"                          
 [9] "Guinea-Bissau"                     "Mali"                             
[11] "Mauritania"                        "Togo"                             
[13] "Dem. People's Republic of Korea"   "Mongolia"                         
[15] "Brunei Darussalam"                 "Timor-Leste"                      
[17] "Bhutan"                            "Maldives"                         
[19] "Bahrain"                           "Qatar"                            
[21] "Slovakia"                          "Faroe Islands*"                   
[23] "Isle of Man*"                      "Andorra"                          
[25] "Montenegro"                        "Liechtenstein"                    
[27] "Anguilla*"                         "Bonaire, Sint Eustatius and Saba*"
[29] "British Virgin Islands*"           "Cayman Islands*"                  
[31] "Curaçao*"                          "Guadeloupe*"                      
[33] "Sint Maarten (Dutch part)*"        "Turks and Caicos Islands*"        
[35] "United States Virgin Islands*"     "Falkland Islands (Malvinas)*"     
[37] "Greenland*"                        "Saint Pierre and Miquelon*"       
[39] "Papua New Guinea"                  "Solomon Islands"                  
[41] "Guam*"                             "Kiribati"                         
[43] "Northern Mariana Islands*"         "Palau"                            
[45] "American Samoa*"                   "Cook Islands*"                    
[47] "French Polynesia*"                 "Niue*"                            
[49] "Tuvalu"                           </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>only_in_origins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Afghanistan"                      "Angola"                          
 [3] "Armenia"                          "Azerbaijan*"                     
 [5] "Bosnia and Herzegovina"           "China, Macao SAR*"               
 [7] "Côte d'Ivoire"                    "Democratic Republic of the Congo"
 [9] "Eritrea"                          "Ethiopia"                        
[11] "Fiji"                             "Gambia"                          
[13] "Grenada"                          "Iran (Islamic Republic of)"      
[15] "Iraq"                             "Kazakhstan"                      
[17] "Kenya"                            "Kyrgyzstan"                      
[19] "Lao People's Democratic Republic" "Malaysia*"                       
[21] "Myanmar"                          "Nepal"                           
[23] "Nigeria"                          "Pakistan"                        
[25] "Republic of Moldova*"             "Saint Kitts and Nevis"           
[27] "Saudi Arabia"                     "Somalia"                         
[29] "Sudan"                            "Suriname"                        
[31] "Syrian Arab Republic"             "North Macedonia"                 
[33] "Tonga"                            "Turkmenistan"                    
[35] "Uzbekistan"                       "Yemen"                           
[37] "Zimbabwe"                         "Other"                           </code></pre>
</div>
</div>
</section>
<section id="exploring-a-couple-of-cases-to-see-if-it-makes-sense" class="level2">
<h2 class="anchored" data-anchor-id="exploring-a-couple-of-cases-to-see-if-it-makes-sense">Exploring a couple of cases to see if it makes sense</h2>
<section id="world" class="level3">
<h3 class="anchored" data-anchor-id="world">World</h3>
<p>https://www.migrationdataportal.org/international-data?i=stock_abs_&amp;t=2020&amp;cm49=840</p>
<p>“Total number of international migrants at mid-year 2020 50.6 million”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_development_group_country_or_area_of_origin <span class="sc">==</span> <span class="st">"WORLD"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stock_2020)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  stock_2020
       &lt;dbl&gt;
1   50632836</code></pre>
</div>
</div>
</section>
<section id="mexico" class="level3">
<h3 class="anchored" data-anchor-id="mexico">Mexico</h3>
<p>https://worldmigrationreport.iom.int/msite/wmr-2024-interactive/ Mexico (484) 10,853,105 v 799,248</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    location_code_of_destination <span class="sc">==</span> <span class="st">"484"</span> <span class="sc">|</span> location_code_of_origin <span class="sc">==</span> <span class="st">"484"</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stock_2020)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 1
  stock_2020
       &lt;dbl&gt;
1     799248
2   10853105</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="reshaping-the-data" class="level1">
<h1>Reshaping the data</h1>
<section id="checking-for-duplicates-in-origin-destination-pair" class="level2">
<h2 class="anchored" data-anchor-id="checking-for-duplicates-in-origin-destination-pair">Checking for duplicates in origin-destination pair</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(location_code_of_destination, location_code_of_origin) <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">%&gt;%</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
# Groups:   location_code_of_destination [2]
  location_code_of_destination location_code_of_origin     n
                         &lt;dbl&gt;                   &lt;dbl&gt; &lt;int&gt;
1                          840                     927     2
2                          927                     840     2</code></pre>
</div>
</div>
<p>Examining what those are.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(location_code_of_destination <span class="sc">==</span> <span class="st">"840"</span> <span class="sc">&amp;</span> location_code_of_origin <span class="sc">==</span> <span class="st">"927"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 12
  index region_development_group…¹ location_code_of_des…² region_development_g…³
  &lt;dbl&gt; &lt;chr&gt;                                       &lt;dbl&gt; &lt;chr&gt;                 
1 33817 United States of America*                     840 Australia and New Zea…
2 33854 United States of America*                     840 Australia and New Zea…
# ℹ abbreviated names:
#   ¹​region_development_group_country_or_area_of_destination,
#   ²​location_code_of_destination,
#   ³​region_development_group_country_or_area_of_origin
# ℹ 8 more variables: location_code_of_origin &lt;dbl&gt;, stock_1990 &lt;dbl&gt;,
#   stock_1995 &lt;dbl&gt;, stock_2000 &lt;dbl&gt;, stock_2005 &lt;dbl&gt;, stock_2010 &lt;dbl&gt;,
#   stock_2015 &lt;dbl&gt;, stock_2020 &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">across</span>(<span class="sc">-</span>index)) <span class="sc">%&gt;%</span>  <span class="co"># Group by all columns except 'index'</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 12
# Groups:   region_development_group_country_or_area_of_destination,
#   location_code_of_destination,
#   region_development_group_country_or_area_of_origin,
#   location_code_of_origin, stock_1990, stock_1995, stock_2000, stock_2005,
#   stock_2010, stock_2015, stock_2020 [2]
  index region_development_group…¹ location_code_of_des…² region_development_g…³
  &lt;dbl&gt; &lt;chr&gt;                                       &lt;dbl&gt; &lt;chr&gt;                 
1  2241 Australia and New Zealand                     927 United States of Amer…
2 33817 United States of America*                     840 Australia and New Zea…
3 33854 United States of America*                     840 Australia and New Zea…
4 34551 Australia and New Zealand                     927 United States of Amer…
# ℹ abbreviated names:
#   ¹​region_development_group_country_or_area_of_destination,
#   ²​location_code_of_destination,
#   ³​region_development_group_country_or_area_of_origin
# ℹ 8 more variables: location_code_of_origin &lt;dbl&gt;, stock_1990 &lt;dbl&gt;,
#   stock_1995 &lt;dbl&gt;, stock_2000 &lt;dbl&gt;, stock_2005 &lt;dbl&gt;, stock_2010 &lt;dbl&gt;,
#   stock_2015 &lt;dbl&gt;, stock_2020 &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="removing-duplicates" class="level2">
<h2 class="anchored" data-anchor-id="removing-duplicates">Removing duplicates</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>data_subset_us <span class="ot">&lt;-</span> data_subset_us <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(<span class="fu">across</span>(<span class="sc">-</span>index), <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_subset_us)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 407  12</code></pre>
</div>
</div>
</section>
<section id="conducting-self-join-to-create-data-set-with-all-migration-pairs" class="level2">
<h2 class="anchored" data-anchor-id="conducting-self-join-to-create-data-set-with-all-migration-pairs">Conducting self join to create data set with all migration pairs</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="ot">&lt;-</span> data_subset_us <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># full join creates NAs where there is no match</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># using full join in case there's migration in one direction and not the other</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    data_subset_us,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># matching destination in X with origin in Y and vice versa</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"location_code_of_destination"</span> <span class="ot">=</span> <span class="st">"location_code_of_origin"</span>,</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"location_code_of_origin"</span> <span class="ot">=</span> <span class="st">"location_code_of_destination"</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># _destination_to_origin reflects migration where location_code_of_destination is the destination and location_code_of_origin is the origin</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># _origin_to_destination reflects migration where location_code_of_origin is the destination and location_code_of_destination is the origin</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_destination_to_origin"</span>, <span class="st">"_origin_to_destination"</span>)</span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 494  22</code></pre>
</div>
</div>
</section>
<section id="checking-columns" class="level2">
<h2 class="anchored" data-anchor-id="checking-columns">Checking columns</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "index_destination_to_origin"                                                  
 [2] "region_development_group_country_or_area_of_destination_destination_to_origin"
 [3] "location_code_of_destination"                                                 
 [4] "region_development_group_country_or_area_of_origin_destination_to_origin"     
 [5] "location_code_of_origin"                                                      
 [6] "stock_1990_destination_to_origin"                                             
 [7] "stock_1995_destination_to_origin"                                             
 [8] "stock_2000_destination_to_origin"                                             
 [9] "stock_2005_destination_to_origin"                                             
[10] "stock_2010_destination_to_origin"                                             
[11] "stock_2015_destination_to_origin"                                             
[12] "stock_2020_destination_to_origin"                                             
[13] "index_origin_to_destination"                                                  
[14] "region_development_group_country_or_area_of_destination_origin_to_destination"
[15] "region_development_group_country_or_area_of_origin_origin_to_destination"     
[16] "stock_1990_origin_to_destination"                                             
[17] "stock_1995_origin_to_destination"                                             
[18] "stock_2000_origin_to_destination"                                             
[19] "stock_2005_origin_to_destination"                                             
[20] "stock_2010_origin_to_destination"                                             
[21] "stock_2015_origin_to_destination"                                             
[22] "stock_2020_origin_to_destination"                                             </code></pre>
</div>
</div>
</section>
<section id="checking-number-of-rows-where-us-is-destination-or-origin" class="level2">
<h2 class="anchored" data-anchor-id="checking-number-of-rows-where-us-is-destination-or-origin">Checking number of rows where US is destination or origin</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(location_code_of_destination <span class="sc">==</span> <span class="st">"840"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 247</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(location_code_of_origin <span class="sc">==</span> <span class="st">"840"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 247</code></pre>
</div>
</div>
</section>
<section id="checking-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="checking-missing-values">Checking missing values</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data_subset_us_reshaped, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index_destination_to_origin 
                                                                           87 
region_development_group_country_or_area_of_destination_destination_to_origin 
                                                                           87 
                                                 location_code_of_destination 
                                                                            0 
     region_development_group_country_or_area_of_origin_destination_to_origin 
                                                                           87 
                                                      location_code_of_origin 
                                                                            0 
                                             stock_1990_destination_to_origin 
                                                                           93 
                                             stock_1995_destination_to_origin 
                                                                           93 
                                             stock_2000_destination_to_origin 
                                                                           92 
                                             stock_2005_destination_to_origin 
                                                                           90 
                                             stock_2010_destination_to_origin 
                                                                           88 
                                             stock_2015_destination_to_origin 
                                                                           88 
                                             stock_2020_destination_to_origin 
                                                                           88 
                                                  index_origin_to_destination 
                                                                           87 
region_development_group_country_or_area_of_destination_origin_to_destination 
                                                                           87 
     region_development_group_country_or_area_of_origin_origin_to_destination 
                                                                           87 
                                             stock_1990_origin_to_destination 
                                                                           93 
                                             stock_1995_origin_to_destination 
                                                                           93 
                                             stock_2000_origin_to_destination 
                                                                           92 
                                             stock_2005_origin_to_destination 
                                                                           90 
                                             stock_2010_origin_to_destination 
                                                                           88 
                                             stock_2015_origin_to_destination 
                                                                           88 
                                             stock_2020_origin_to_destination 
                                                                           88 </code></pre>
</div>
</div>
<p>87 = 49 (number of countries only in destination) + 38 (number of countries only in origin)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">if_any</span>(<span class="fu">everything</span>(), is.na)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 178 × 22
   index_destination_to_origin region_development_group…¹ location_code_of_des…²
                         &lt;dbl&gt; &lt;chr&gt;                                       &lt;dbl&gt;
 1                        7046 Mauritius*                                    480
 2                        8181 Cameroon                                      120
 3                        8254 Central African Republic                      140
 4                        8383 Congo                                         178
 5                        8577 Gabon                                         266
 6                        9918 Botswana                                       72
 7                        9985 Eswatini                                      748
 8                       10048 Lesotho                                       426
 9                       10179 Namibia                                       516
10                       11327 Guinea-Bissau                                 624
# ℹ 168 more rows
# ℹ abbreviated names:
#   ¹​region_development_group_country_or_area_of_destination_destination_to_origin,
#   ²​location_code_of_destination
# ℹ 19 more variables:
#   region_development_group_country_or_area_of_origin_destination_to_origin &lt;chr&gt;,
#   location_code_of_origin &lt;dbl&gt;, stock_1990_destination_to_origin &lt;dbl&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(data_subset_us_reshaped, location_code_of_destination <span class="sc">==</span> <span class="st">"840"</span>),</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x))</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index_destination_to_origin 
                                                                           49 
region_development_group_country_or_area_of_destination_destination_to_origin 
                                                                           49 
                                                 location_code_of_destination 
                                                                            0 
     region_development_group_country_or_area_of_origin_destination_to_origin 
                                                                           49 
                                                      location_code_of_origin 
                                                                            0 
                                             stock_1990_destination_to_origin 
                                                                           49 
                                             stock_1995_destination_to_origin 
                                                                           49 
                                             stock_2000_destination_to_origin 
                                                                           49 
                                             stock_2005_destination_to_origin 
                                                                           49 
                                             stock_2010_destination_to_origin 
                                                                           49 
                                             stock_2015_destination_to_origin 
                                                                           49 
                                             stock_2020_destination_to_origin 
                                                                           49 
                                                  index_origin_to_destination 
                                                                           38 
region_development_group_country_or_area_of_destination_origin_to_destination 
                                                                           38 
     region_development_group_country_or_area_of_origin_origin_to_destination 
                                                                           38 
                                             stock_1990_origin_to_destination 
                                                                           44 
                                             stock_1995_origin_to_destination 
                                                                           44 
                                             stock_2000_origin_to_destination 
                                                                           43 
                                             stock_2005_origin_to_destination 
                                                                           41 
                                             stock_2010_origin_to_destination 
                                                                           39 
                                             stock_2015_origin_to_destination 
                                                                           39 
                                             stock_2020_origin_to_destination 
                                                                           39 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(data_subset_us_reshaped, location_code_of_origin <span class="sc">==</span> <span class="st">"840"</span>),</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x))</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index_destination_to_origin 
                                                                           38 
region_development_group_country_or_area_of_destination_destination_to_origin 
                                                                           38 
                                                 location_code_of_destination 
                                                                            0 
     region_development_group_country_or_area_of_origin_destination_to_origin 
                                                                           38 
                                                      location_code_of_origin 
                                                                            0 
                                             stock_1990_destination_to_origin 
                                                                           44 
                                             stock_1995_destination_to_origin 
                                                                           44 
                                             stock_2000_destination_to_origin 
                                                                           43 
                                             stock_2005_destination_to_origin 
                                                                           41 
                                             stock_2010_destination_to_origin 
                                                                           39 
                                             stock_2015_destination_to_origin 
                                                                           39 
                                             stock_2020_destination_to_origin 
                                                                           39 
                                                  index_origin_to_destination 
                                                                           49 
region_development_group_country_or_area_of_destination_origin_to_destination 
                                                                           49 
     region_development_group_country_or_area_of_origin_origin_to_destination 
                                                                           49 
                                             stock_1990_origin_to_destination 
                                                                           49 
                                             stock_1995_origin_to_destination 
                                                                           49 
                                             stock_2000_origin_to_destination 
                                                                           49 
                                             stock_2005_origin_to_destination 
                                                                           49 
                                             stock_2010_origin_to_destination 
                                                                           49 
                                             stock_2015_origin_to_destination 
                                                                           49 
                                             stock_2020_origin_to_destination 
                                                                           49 </code></pre>
</div>
</div>
</section>
<section id="removing-rows-where-the-us-is-the-location_code_of_destination" class="level2">
<h2 class="anchored" data-anchor-id="removing-rows-where-the-us-is-the-location_code_of_destination">Removing rows where the US is the <code>location_code_of_destination</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 494</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="ot">&lt;-</span> data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(location_code_of_destination <span class="sc">!=</span> <span class="st">"840"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 247</code></pre>
</div>
</div>
</section>
<section id="checking-countries-that-i-still-have" class="level2">
<h2 class="anchored" data-anchor-id="checking-countries-that-i-still-have">Checking countries that I still have</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_destination_to_origin <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_destination_to_origin <span class="sc">%in%</span> names_all</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_destination_destination_to_origin) <span class="sc">%&gt;%</span> </span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Mauritius*"                         "Uganda"                            
  [3] "United Republic of Tanzania*"       "Zambia"                            
  [5] "Cameroon"                           "Central African Republic"          
  [7] "Congo"                              "Gabon"                             
  [9] "Algeria"                            "Egypt"                             
 [11] "Libya"                              "Morocco"                           
 [13] "Tunisia"                            "Botswana"                          
 [15] "Eswatini"                           "Lesotho"                           
 [17] "Namibia"                            "South Africa"                      
 [19] "Cabo Verde"                         "Ghana"                             
 [21] "Guinea"                             "Guinea-Bissau"                     
 [23] "Liberia"                            "Mali"                              
 [25] "Mauritania"                         "Senegal"                           
 [27] "Sierra Leone"                       "Togo"                              
 [29] "Tajikistan"                         "China*"                            
 [31] "China, Hong Kong SAR*"              "Dem. People's Republic of Korea"   
 [33] "Japan"                              "Mongolia"                          
 [35] "Republic of Korea"                  "Brunei Darussalam"                 
 [37] "Cambodia"                           "Indonesia"                         
 [39] "Philippines"                        "Singapore"                         
 [41] "Thailand"                           "Timor-Leste"                       
 [43] "Viet Nam"                           "Bangladesh"                        
 [45] "Bhutan"                             "India"                             
 [47] "Maldives"                           "Sri Lanka"                         
 [49] "Bahrain"                            "Cyprus*"                           
 [51] "Georgia*"                           "Israel"                            
 [53] "Jordan"                             "Kuwait"                            
 [55] "Lebanon"                            "Qatar"                             
 [57] "State of Palestine*"                "Turkey"                            
 [59] "United Arab Emirates"               "Belarus"                           
 [61] "Bulgaria"                           "Czechia"                           
 [63] "Hungary"                            "Poland"                            
 [65] "Romania"                            "Russian Federation"                
 [67] "Slovakia"                           "Ukraine*"                          
 [69] "Denmark*"                           "Estonia"                           
 [71] "Faroe Islands*"                     "Finland*"                          
 [73] "Iceland"                            "Ireland"                           
 [75] "Isle of Man*"                       "Latvia"                            
 [77] "Lithuania"                          "Norway*"                           
 [79] "Sweden"                             "United Kingdom*"                   
 [81] "Albania"                            "Andorra"                           
 [83] "Croatia"                            "Greece"                            
 [85] "Italy"                              "Malta"                             
 [87] "Montenegro"                         "Portugal"                          
 [89] "Serbia*"                            "Slovenia"                          
 [91] "Spain*"                             "Austria"                           
 [93] "Belgium"                            "France*"                           
 [95] "Germany"                            "Liechtenstein"                     
 [97] "Luxembourg"                         "Netherlands*"                      
 [99] "Switzerland"                        "Anguilla*"                         
[101] "Antigua and Barbuda"                "Aruba*"                            
[103] "Bahamas"                            "Barbados"                          
[105] "Bonaire, Sint Eustatius and Saba*"  "British Virgin Islands*"           
[107] "Cayman Islands*"                    "Cuba"                              
[109] "Curaçao*"                           "Dominica"                          
[111] "Dominican Republic"                 "Guadeloupe*"                       
[113] "Haiti"                              "Jamaica"                           
[115] "Montserrat*"                        "Puerto Rico*"                      
[117] "Saint Lucia"                        "Saint Vincent and the Grenadines"  
[119] "Sint Maarten (Dutch part)*"         "Trinidad and Tobago"               
[121] "Turks and Caicos Islands*"          "United States Virgin Islands*"     
[123] "Belize"                             "Costa Rica"                        
[125] "El Salvador"                        "Guatemala"                         
[127] "Honduras"                           "Mexico"                            
[129] "Nicaragua"                          "Panama"                            
[131] "Argentina"                          "Bolivia (Plurinational State of)"  
[133] "Brazil"                             "Chile"                             
[135] "Colombia"                           "Ecuador"                           
[137] "Falkland Islands (Malvinas)*"       "Guyana"                            
[139] "Paraguay"                           "Peru"                              
[141] "Uruguay"                            "Venezuela (Bolivarian Republic of)"
[143] "Bermuda*"                           "Canada"                            
[145] "Greenland*"                         "Saint Pierre and Miquelon*"        
[147] "Australia*"                         "New Zealand*"                      
[149] "Melanesia"                          "Papua New Guinea"                  
[151] "Solomon Islands"                    "Micronesia"                        
[153] "Guam*"                              "Kiribati"                          
[155] "Marshall Islands"                   "Micronesia (Fed. States of)"       
[157] "Northern Mariana Islands*"          "Palau"                             
[159] "Polynesia*"                         "American Samoa*"                   
[161] "Cook Islands*"                      "French Polynesia*"                 
[163] "Niue*"                              "Samoa"                             
[165] "Tuvalu"                             NA                                  </code></pre>
</div>
</div>
<p>Looks good–there where 165 countries where there are Americans.</p>
</section>
<section id="exploring-a-couple-of-cases-to-see-if-it-still-makes-sense" class="level2">
<h2 class="anchored" data-anchor-id="exploring-a-couple-of-cases-to-see-if-it-still-makes-sense">Exploring a couple of cases to see if it still makes sense</h2>
<section id="world-1" class="level3">
<h3 class="anchored" data-anchor-id="world-1">World</h3>
<p>https://www.migrationdataportal.org/international-data?i=stock_abs_&amp;t=2020&amp;cm49=840</p>
<p>“Total number of international migrants at mid-year 2020 50.6 million”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region_development_group_country_or_area_of_destination_destination_to_origin <span class="sc">==</span> <span class="st">"WORLD"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stock_2020_origin_to_destination)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  stock_2020_origin_to_destination
                             &lt;dbl&gt;
1                         50632836</code></pre>
</div>
</div>
</section>
<section id="mexico-1" class="level3">
<h3 class="anchored" data-anchor-id="mexico-1">Mexico</h3>
<p>https://worldmigrationreport.iom.int/msite/wmr-2024-interactive/ Mexico (484) 10,853,105 v 799,248</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>    location_code_of_destination <span class="sc">==</span> <span class="st">"484"</span> <span class="sc">|</span> location_code_of_origin <span class="sc">==</span> <span class="st">"484"</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stock_2020_origin_to_destination, stock_2020_destination_to_origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  stock_2020_origin_to_destination stock_2020_destination_to_origin
                             &lt;dbl&gt;                            &lt;dbl&gt;
1                         10853105                           799248</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="creating-new-columns-for-difference" class="level1">
<h1>Creating new columns for difference</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="ot">&lt;-</span> data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># immigration to US - immigration from US</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_1990 =</span> stock_1990_origin_to_destination <span class="sc">-</span> stock_1990_destination_to_origin,</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_1995 =</span> stock_1995_origin_to_destination <span class="sc">-</span> stock_1995_destination_to_origin,</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_2000 =</span> stock_2000_origin_to_destination <span class="sc">-</span> stock_2000_destination_to_origin,</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_2005 =</span> stock_2005_origin_to_destination <span class="sc">-</span> stock_2005_destination_to_origin,</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_2010 =</span> stock_2010_origin_to_destination <span class="sc">-</span> stock_2010_destination_to_origin,</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_2015 =</span> stock_2015_origin_to_destination <span class="sc">-</span> stock_2015_destination_to_origin,</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_stock_2020 =</span> stock_2020_origin_to_destination <span class="sc">-</span> stock_2020_destination_to_origin</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "index_destination_to_origin"                                                  
 [2] "region_development_group_country_or_area_of_destination_destination_to_origin"
 [3] "location_code_of_destination"                                                 
 [4] "region_development_group_country_or_area_of_origin_destination_to_origin"     
 [5] "location_code_of_origin"                                                      
 [6] "stock_1990_destination_to_origin"                                             
 [7] "stock_1995_destination_to_origin"                                             
 [8] "stock_2000_destination_to_origin"                                             
 [9] "stock_2005_destination_to_origin"                                             
[10] "stock_2010_destination_to_origin"                                             
[11] "stock_2015_destination_to_origin"                                             
[12] "stock_2020_destination_to_origin"                                             
[13] "index_origin_to_destination"                                                  
[14] "region_development_group_country_or_area_of_destination_origin_to_destination"
[15] "region_development_group_country_or_area_of_origin_origin_to_destination"     
[16] "stock_1990_origin_to_destination"                                             
[17] "stock_1995_origin_to_destination"                                             
[18] "stock_2000_origin_to_destination"                                             
[19] "stock_2005_origin_to_destination"                                             
[20] "stock_2010_origin_to_destination"                                             
[21] "stock_2015_origin_to_destination"                                             
[22] "stock_2020_origin_to_destination"                                             
[23] "diff_stock_1990"                                                              
[24] "diff_stock_1995"                                                              
[25] "diff_stock_2000"                                                              
[26] "diff_stock_2005"                                                              
[27] "diff_stock_2010"                                                              
[28] "diff_stock_2015"                                                              
[29] "diff_stock_2020"                                                              </code></pre>
</div>
</div>
<section id="checking-mexico-to-see-if-it-still-makes-sense" class="level2">
<h2 class="anchored" data-anchor-id="checking-mexico-to-see-if-it-still-makes-sense">Checking Mexico to see if it still makes sense</h2>
<p>https://worldmigrationreport.iom.int/msite/wmr-2024-interactive/ Mexico (484) 10,853,105 v 799,248</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10853105</span> <span class="sc">-</span> <span class="dv">799248</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10053857</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    location_code_of_destination <span class="sc">==</span> <span class="st">"484"</span> <span class="sc">|</span> location_code_of_origin <span class="sc">==</span> <span class="st">"484"</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(diff_stock_2020)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  diff_stock_2020
            &lt;dbl&gt;
1        10053857</code></pre>
</div>
</div>
</section>
<section id="taking-a-look-at-new-zealand" class="level2">
<h2 class="anchored" data-anchor-id="taking-a-look-at-new-zealand">Taking a look at New Zealand</h2>
<p>Clare said in the email “Looking at this spreadsheet shows 35,989 migrants from the United States to New Zealand and 49,640 migrants from New Zealand to the United States [for 2020].”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    location_code_of_destination <span class="sc">==</span> <span class="st">"554"</span> <span class="sc">|</span> location_code_of_origin <span class="sc">==</span> <span class="st">"554"</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"stock"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 21
  stock_1990_destination_to_origin stock_1995_destinati…¹ stock_2000_destinati…²
                             &lt;dbl&gt;                  &lt;dbl&gt;                  &lt;dbl&gt;
1                             8305                  11309                  12984
# ℹ abbreviated names: ¹​stock_1995_destination_to_origin,
#   ²​stock_2000_destination_to_origin
# ℹ 18 more variables: stock_2005_destination_to_origin &lt;dbl&gt;,
#   stock_2010_destination_to_origin &lt;dbl&gt;,
#   stock_2015_destination_to_origin &lt;dbl&gt;,
#   stock_2020_destination_to_origin &lt;dbl&gt;,
#   stock_1990_origin_to_destination &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Indeed, it’s positive.</p>
</section>
<section id="taking-a-look-at-the-countries-where-the-net-is-0-or-negative" class="level2">
<h2 class="anchored" data-anchor-id="taking-a-look-at-the-countries-where-the-net-is-0-or-negative">Taking a look at the countries where the net is 0 or negative</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>    diff_stock_1990 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    diff_stock_1995 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    diff_stock_2000 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    diff_stock_2005 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>    diff_stock_2010 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>    diff_stock_2015 <span class="sc">&lt;=</span> <span class="dv">0</span> <span class="sc">|</span></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>    diff_stock_2020 <span class="sc">&lt;=</span> <span class="dv">0</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>    region_development_group_country_or_area_of_destination_destination_to_origin,</span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">starts_with</span>(<span class="st">"diff_stock"</span>)</span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>  ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  region_development_group_cou…¹ diff_stock_1990 diff_stock_1995 diff_stock_2000
  &lt;chr&gt;                                    &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;
1 Libya                                   -15030           -8300           -1774
2 Bangladesh                               -7145           29049           66103
3 United Arab Emirates                     -1775            -141            1300
4 Norway*                                  26413           22313           18068
5 Australia*                              -11308           -2928            2823
6 Micronesia                              -26591          -17846           -8908
# ℹ abbreviated name:
#   ¹​region_development_group_country_or_area_of_destination_destination_to_origin
# ℹ 4 more variables: diff_stock_2005 &lt;dbl&gt;, diff_stock_2010 &lt;dbl&gt;,
#   diff_stock_2015 &lt;dbl&gt;, diff_stock_2020 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Lybia was the case until 2020. Bangladesh was the case only in 1990. United Arab Emirates was the case in 1990, 1995, 2010, and 2015. Norway was the case only in 2020. Australia was the case always except in 2000. Micronesia has always been the case.</p>
<p>So, in 2020, the only cases were Australia, Micronesia, and Norway. In 2015, Australia, Micronesia, United Arab Emirates, and Libya. In 2010, same. In 2005, Micronesia, Australia, and Libya. In 2000, only Micronesia and Libya. In 1995, Micronesia, Libya, Australia, and United Arab Emirates. In 1990, all except Norway–Micronesia, Libya, Australia, Bangladesh, United Arab Emirates, and Norway.</p>
<p>The differences seem pretty small in general. I have to understand that in context though.</p>
</section>
<section id="looking-at-the-magnitude-of-differences" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-magnitude-of-differences">Looking at the magnitude of differences</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_1990 =</span> <span class="fu">abs</span>(diff_stock_1990),</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_1995 =</span> <span class="fu">abs</span>(diff_stock_1995),</span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_2000 =</span> <span class="fu">abs</span>(diff_stock_2000),</span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_2005 =</span> <span class="fu">abs</span>(diff_stock_2005),</span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_2010 =</span> <span class="fu">abs</span>(diff_stock_2010),</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_2015 =</span> <span class="fu">abs</span>(diff_stock_2015),</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">abs_diff_stock_2020 =</span> <span class="fu">abs</span>(diff_stock_2020)</span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"abs_diff"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a>  Hmisc<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. 

 7  Variables      203  Observations
--------------------------------------------------------------------------------
abs_diff_stock_1990 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     114       89      114        1   154249   237357     1722     3053 
     .25      .50      .75      .90      .95 
    9156    28400   130650   453607   576077 

lowest :     120     453     480     955    1276
highest:  735785  769651  894928  952900 4099784
--------------------------------------------------------------------------------
abs_diff_stock_1995 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     114       89      114        1   206182   322166     3065     4787 
     .25      .50      .75      .90      .95 
   13662    38188   164364   519421   753584 

lowest :     141    1063    1869    2450    2928
highest:  814718 1051955 1132261 1153677 6555473
--------------------------------------------------------------------------------
abs_diff_stock_2000 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     115       88      115        1   256624   406749     3699     5676 
     .25      .50      .75      .90      .95 
   16036    44806   199964   575885   929587 

lowest :    1239    1300    1774    2441    2823
highest: 1045187 1339991 1342508 1367857 9052130
--------------------------------------------------------------------------------
abs_diff_stock_2005 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1   281958   448409     3949     6933 
     .25      .50      .75      .90      .95 
   18784    52198   205760   588383  1020896 

lowest :     1634     1768     1958     2940     3009
highest:  1367787  1394208  1567340  1595403 10090893
--------------------------------------------------------------------------------
abs_diff_stock_2010 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1   319091   509072     4940     7502 
     .25      .50      .75      .90      .95 
   20642    59358   223463   655198  1198779 

lowest :     1586     2102     3206     3234     3542
highest:  1524851  1746571  1808102  1907475 11426612
--------------------------------------------------------------------------------
abs_diff_stock_2015 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1   344158   542140     5692     7760 
     .25      .50      .75      .90      .95 
   24902    70024   267144   692973  1309798 

lowest :      175     1574     1910     3653     4529
highest:  1530490  1946805  2354498  2657609 10914796
--------------------------------------------------------------------------------
abs_diff_stock_2020 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1   344548   539595     6439     9627 
     .25      .50      .75      .90      .95 
   27478    67375   243433   791408  1401186 

lowest :      602      663      903     2426     3509
highest:  1669736  2023321  2163348  2690897 10053857
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>In 1990, Micronesia, Libya, and Australia were between the 25th and 50th percentile. Bangladesh was between the 10th and 25th. United Arab Emirates was between the 5th and 10th.</p>
<p>In 1995, Micronesia was between the 25th and 50th. Libya between the 10th and 25th. Australia between 5th.</p>
<p>In 2000, Micronesia was between the 10th and the 25th. Libya below the 5th.</p>
<p>In 2005, Micronesia was between the 10th and the 25th. Australia and Libya below the 5th.</p>
<p>In 2010, Australia and Micronesia were between the 10th and the 25th. United Arab Emirates were below the 5th.</p>
<p>In 2015, Australia was between the 10th and the 25th. Micronesia between the 5th and the 10th. United Arab Emirates below the 5th.</p>
<p>In 2020, Australia was between the 10th and the 25th. Micronesia and Norway below the 5th.</p>
</section>
</section>
<section id="creating-new-columns-for-ratio" class="level1">
<h1>Creating new columns for ratio</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="ot">&lt;-</span> data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># immigration to US / immigration from US</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_1990 =</span> stock_1990_origin_to_destination <span class="sc">/</span> stock_1990_destination_to_origin,</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_1995 =</span> stock_1995_origin_to_destination <span class="sc">/</span> stock_1995_destination_to_origin,</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_2000 =</span> stock_2000_origin_to_destination <span class="sc">/</span> stock_2000_destination_to_origin,</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_2005 =</span> stock_2005_origin_to_destination <span class="sc">/</span> stock_2005_destination_to_origin,</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_2010 =</span> stock_2010_origin_to_destination <span class="sc">/</span> stock_2010_destination_to_origin,</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_2015 =</span> stock_2015_origin_to_destination <span class="sc">/</span> stock_2015_destination_to_origin,</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio_stock_2020 =</span> stock_2020_origin_to_destination <span class="sc">/</span> stock_2020_destination_to_origin</span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "index_destination_to_origin"                                                  
 [2] "region_development_group_country_or_area_of_destination_destination_to_origin"
 [3] "location_code_of_destination"                                                 
 [4] "region_development_group_country_or_area_of_origin_destination_to_origin"     
 [5] "location_code_of_origin"                                                      
 [6] "stock_1990_destination_to_origin"                                             
 [7] "stock_1995_destination_to_origin"                                             
 [8] "stock_2000_destination_to_origin"                                             
 [9] "stock_2005_destination_to_origin"                                             
[10] "stock_2010_destination_to_origin"                                             
[11] "stock_2015_destination_to_origin"                                             
[12] "stock_2020_destination_to_origin"                                             
[13] "index_origin_to_destination"                                                  
[14] "region_development_group_country_or_area_of_destination_origin_to_destination"
[15] "region_development_group_country_or_area_of_origin_origin_to_destination"     
[16] "stock_1990_origin_to_destination"                                             
[17] "stock_1995_origin_to_destination"                                             
[18] "stock_2000_origin_to_destination"                                             
[19] "stock_2005_origin_to_destination"                                             
[20] "stock_2010_origin_to_destination"                                             
[21] "stock_2015_origin_to_destination"                                             
[22] "stock_2020_origin_to_destination"                                             
[23] "diff_stock_1990"                                                              
[24] "diff_stock_1995"                                                              
[25] "diff_stock_2000"                                                              
[26] "diff_stock_2005"                                                              
[27] "diff_stock_2010"                                                              
[28] "diff_stock_2015"                                                              
[29] "diff_stock_2020"                                                              
[30] "ratio_stock_1990"                                                             
[31] "ratio_stock_1995"                                                             
[32] "ratio_stock_2000"                                                             
[33] "ratio_stock_2005"                                                             
[34] "ratio_stock_2010"                                                             
[35] "ratio_stock_2015"                                                             
[36] "ratio_stock_2020"                                                             </code></pre>
</div>
</div>
<section id="looking-at-the-distribution-of-ratios" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-distribution-of-ratios">Looking at the distribution of ratios</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"ratio"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>  Hmisc<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>. 

 7  Variables      203  Observations
--------------------------------------------------------------------------------
ratio_stock_1990 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     114       89      114        1    75.22    124.8    1.474    1.917 
     .25      .50      .75      .90      .95 
   4.339   12.073   42.281  108.575  265.544 

lowest : 0.125814 0.211727 0.482658 0.749816 0.788931
highest: 513.786  621.392  779      1305.86  2065.63 
--------------------------------------------------------------------------------
ratio_stock_1995 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     114       89      114        1    61.34    94.17    1.830    2.555 
     .25      .50      .75      .90      .95 
   5.901   12.887   50.454  102.363  219.222 

lowest : 0.328492 0.364618 0.946989 0.967925 1.71536 
highest: 366.37   461.242  542.326  907.249  1326.44 
--------------------------------------------------------------------------------
ratio_stock_2000 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     115       88      115        1    64.37    96.67    1.825    3.132 
     .25      .50      .75      .90      .95 
   7.480   15.580   50.713  112.152  302.173 

lowest : 0.606763 0.756118 1.04729  1.23152  1.73191 
highest: 342.644  363.876  438.667  745.597  1572.72 
--------------------------------------------------------------------------------
ratio_stock_2005 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1     67.9    103.1    1.752    2.892 
     .25      .50      .75      .90      .95 
   6.860   18.486   47.503  104.061  223.138 

lowest : 0.58735  0.779496 0.957324 1.31109  1.47659 
highest: 357.392  489.96   547.174  610.614  2090.37 
--------------------------------------------------------------------------------
ratio_stock_2010 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1    83.68    132.4    1.674    2.647 
     .25      .50      .75      .90      .95 
   6.168   19.324   53.090  133.304  271.516 

lowest : 0.593971 0.753393 0.819752 0.875296 1.24978 
highest: 397.193  470.857  686.293  737.093  3023.58 
--------------------------------------------------------------------------------
ratio_stock_2015 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1    107.2    173.9    1.613    2.590 
     .25      .50      .75      .90      .95 
   5.983   23.215   63.025  172.471  296.062 

lowest : 0.702113 0.853254 0.866704 0.982235 1.21299 
highest: 423.722  450.212  695.333  930.779  4785.27 
--------------------------------------------------------------------------------
ratio_stock_2020 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
     116       87      116        1      134    227.1    1.325    1.940 
     .25      .50      .75      .90      .95 
   5.711   23.433   69.195  231.411  335.255 

lowest : 0.887035 0.967733 0.970949 1.15531  1.2375  
highest: 420.748  444.742  613.179  744.668  7819.38 
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
<p>Very skewed.</p>
</section>
<section id="looking-at-the-countries-with-lowest-ratio-in-2020" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-countries-with-lowest-ratio-in-2020">Looking at the countries with lowest ratio in 2020</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>    region_development_group_country_or_area_of_destination_destination_to_origin,</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">starts_with</span>(<span class="st">"ratio"</span>)</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ratio_stock_2020) <span class="sc">%&gt;%</span> </span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 8
   region_development_group…¹ ratio_stock_1990 ratio_stock_1995 ratio_stock_2000
   &lt;chr&gt;                                 &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 Australia*                            0.789            0.947            1.05 
 2 Norway*                               2.67             2.45             2.21 
 3 Micronesia                            0.126            0.328            0.607
 4 United Arab Emirates                  0.483            0.968            1.23 
 5 Switzerland                           2.03             1.86             1.73 
 6 Luxembourg                            1.87             2.00             2.28 
 7 Libya                                 0.212            0.365            0.756
 8 New Zealand*                          1.86             1.72             1.81 
 9 Israel                                1.81             1.77             1.83 
10 Spain*                                6.27             5.58             3.70 
11 Sweden                                4.74             3.90             3.54 
12 Belgium                               2.27             2.23             2.24 
13 Singapore                             3.77             4.32             4.38 
14 Netherlands*                          7.04             5.81             4.80 
15 Denmark*                              5.46             4.48             3.75 
16 France*                               2.96             3.30             3.62 
17 Canada                                3.12             3.24             3.29 
18 Ireland                              10.7             13.1              9.89 
19 Iceland                               4.71             4.52             4.09 
20 Malta                                11.6              9.45             8.35 
# ℹ abbreviated name:
#   ¹​region_development_group_country_or_area_of_destination_destination_to_origin
# ℹ 4 more variables: ratio_stock_2005 &lt;dbl&gt;, ratio_stock_2010 &lt;dbl&gt;,
#   ratio_stock_2015 &lt;dbl&gt;, ratio_stock_2020 &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="looking-at-the-countries-with-highest-ratio-in-2020" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-countries-with-highest-ratio-in-2020">Looking at the countries with highest ratio in 2020</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>    region_development_group_country_or_area_of_destination_destination_to_origin,</span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">starts_with</span>(<span class="st">"ratio"</span>)</span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(ratio_stock_2020)) <span class="sc">%&gt;%</span> </span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 8
   region_development_group…¹ ratio_stock_1990 ratio_stock_1995 ratio_stock_2000
   &lt;chr&gt;                                 &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
 1 Cuba                                 621.             907.            1573.  
 2 Cambodia                            1306.             542.             364.  
 3 Belarus                              514.             461.             439.  
 4 Haiti                                140.             214.             297.  
 5 Viet Nam                            2066.            1326.             746.  
 6 Georgia*                              NA               NA              101.  
 7 Guyana                               424.             366.             343.  
 8 Sierra Leone                          14.3             28.8             44.5 
 9 Ghana                                 47.8            101.             138.  
10 Tunisia                               17.4             22.6             23.3 
11 Liberia                                3.87             8.85            14.1 
12 El Salvador                           57.9            103.             182.  
13 Lebanon                              112.              87.9             75.3 
14 Ukraine*                              46.6             68.0             90.1 
15 Guatemala                             38.8             63.5             90.3 
16 Jamaica                               73.0             80.1             85.2 
17 Honduras                              40.5             51.2             57.3 
18 China*                               180.             162.             159.  
19 Guinea                                 1.87             4.85             7.53
20 Cabo Verde                            76.4             89.5             99.2 
# ℹ abbreviated name:
#   ¹​region_development_group_country_or_area_of_destination_destination_to_origin
# ℹ 4 more variables: ratio_stock_2005 &lt;dbl&gt;, ratio_stock_2010 &lt;dbl&gt;,
#   ratio_stock_2015 &lt;dbl&gt;, ratio_stock_2020 &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="checking-missing-values-before-saving" class="level2">
<h2 class="anchored" data-anchor-id="checking-missing-values-before-saving">Checking missing values before saving</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data_subset_us_reshaped, <span class="cf">function</span>(x) <span class="fu">sum</span>(<span class="fu">is.na</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                  index_destination_to_origin 
                                                                           38 
region_development_group_country_or_area_of_destination_destination_to_origin 
                                                                           38 
                                                 location_code_of_destination 
                                                                            0 
     region_development_group_country_or_area_of_origin_destination_to_origin 
                                                                           38 
                                                      location_code_of_origin 
                                                                            0 
                                             stock_1990_destination_to_origin 
                                                                           44 
                                             stock_1995_destination_to_origin 
                                                                           44 
                                             stock_2000_destination_to_origin 
                                                                           43 
                                             stock_2005_destination_to_origin 
                                                                           41 
                                             stock_2010_destination_to_origin 
                                                                           39 
                                             stock_2015_destination_to_origin 
                                                                           39 
                                             stock_2020_destination_to_origin 
                                                                           39 
                                                  index_origin_to_destination 
                                                                           49 
region_development_group_country_or_area_of_destination_origin_to_destination 
                                                                           49 
     region_development_group_country_or_area_of_origin_origin_to_destination 
                                                                           49 
                                             stock_1990_origin_to_destination 
                                                                           49 
                                             stock_1995_origin_to_destination 
                                                                           49 
                                             stock_2000_origin_to_destination 
                                                                           49 
                                             stock_2005_origin_to_destination 
                                                                           49 
                                             stock_2010_origin_to_destination 
                                                                           49 
                                             stock_2015_origin_to_destination 
                                                                           49 
                                             stock_2020_origin_to_destination 
                                                                           49 
                                                              diff_stock_1990 
                                                                           89 
                                                              diff_stock_1995 
                                                                           89 
                                                              diff_stock_2000 
                                                                           88 
                                                              diff_stock_2005 
                                                                           87 
                                                              diff_stock_2010 
                                                                           87 
                                                              diff_stock_2015 
                                                                           87 
                                                              diff_stock_2020 
                                                                           87 
                                                             ratio_stock_1990 
                                                                           89 
                                                             ratio_stock_1995 
                                                                           89 
                                                             ratio_stock_2000 
                                                                           88 
                                                             ratio_stock_2005 
                                                                           87 
                                                             ratio_stock_2010 
                                                                           87 
                                                             ratio_stock_2015 
                                                                           87 
                                                             ratio_stock_2020 
                                                                           87 </code></pre>
</div>
</div>
</section>
</section>
<section id="keep-only-countries" class="level1">
<h1>Keep only countries</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 247  36</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="ot">&lt;-</span> data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>region_development_group_country_or_area_of_destination_origin_to_destination <span class="sc">%in%</span> names_all <span class="sc">&amp;</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span>region_development_group_country_or_area_of_origin_origin_to_destination <span class="sc">%in%</span> names_all</span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_subset_us_reshaped)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 203  36</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>data_subset_us_reshaped <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(region_development_group_country_or_area_of_destination_destination_to_origin) <span class="sc">%&gt;%</span> </span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Mauritius*"                         "Uganda"                            
  [3] "United Republic of Tanzania*"       "Zambia"                            
  [5] "Cameroon"                           "Central African Republic"          
  [7] "Congo"                              "Gabon"                             
  [9] "Algeria"                            "Egypt"                             
 [11] "Libya"                              "Morocco"                           
 [13] "Tunisia"                            "Botswana"                          
 [15] "Eswatini"                           "Lesotho"                           
 [17] "Namibia"                            "South Africa"                      
 [19] "Cabo Verde"                         "Ghana"                             
 [21] "Guinea"                             "Guinea-Bissau"                     
 [23] "Liberia"                            "Mali"                              
 [25] "Mauritania"                         "Senegal"                           
 [27] "Sierra Leone"                       "Togo"                              
 [29] "Tajikistan"                         "China*"                            
 [31] "China, Hong Kong SAR*"              "Dem. People's Republic of Korea"   
 [33] "Japan"                              "Mongolia"                          
 [35] "Republic of Korea"                  "Brunei Darussalam"                 
 [37] "Cambodia"                           "Indonesia"                         
 [39] "Philippines"                        "Singapore"                         
 [41] "Thailand"                           "Timor-Leste"                       
 [43] "Viet Nam"                           "Bangladesh"                        
 [45] "Bhutan"                             "India"                             
 [47] "Maldives"                           "Sri Lanka"                         
 [49] "Bahrain"                            "Cyprus*"                           
 [51] "Georgia*"                           "Israel"                            
 [53] "Jordan"                             "Kuwait"                            
 [55] "Lebanon"                            "Qatar"                             
 [57] "State of Palestine*"                "Turkey"                            
 [59] "United Arab Emirates"               "Belarus"                           
 [61] "Bulgaria"                           "Czechia"                           
 [63] "Hungary"                            "Poland"                            
 [65] "Romania"                            "Russian Federation"                
 [67] "Slovakia"                           "Ukraine*"                          
 [69] "Denmark*"                           "Estonia"                           
 [71] "Faroe Islands*"                     "Finland*"                          
 [73] "Iceland"                            "Ireland"                           
 [75] "Isle of Man*"                       "Latvia"                            
 [77] "Lithuania"                          "Norway*"                           
 [79] "Sweden"                             "United Kingdom*"                   
 [81] "Albania"                            "Andorra"                           
 [83] "Croatia"                            "Greece"                            
 [85] "Italy"                              "Malta"                             
 [87] "Montenegro"                         "Portugal"                          
 [89] "Serbia*"                            "Slovenia"                          
 [91] "Spain*"                             "Austria"                           
 [93] "Belgium"                            "France*"                           
 [95] "Germany"                            "Liechtenstein"                     
 [97] "Luxembourg"                         "Netherlands*"                      
 [99] "Switzerland"                        "Anguilla*"                         
[101] "Antigua and Barbuda"                "Aruba*"                            
[103] "Bahamas"                            "Barbados"                          
[105] "Bonaire, Sint Eustatius and Saba*"  "British Virgin Islands*"           
[107] "Cayman Islands*"                    "Cuba"                              
[109] "Curaçao*"                           "Dominica"                          
[111] "Dominican Republic"                 "Guadeloupe*"                       
[113] "Haiti"                              "Jamaica"                           
[115] "Montserrat*"                        "Puerto Rico*"                      
[117] "Saint Lucia"                        "Saint Vincent and the Grenadines"  
[119] "Sint Maarten (Dutch part)*"         "Trinidad and Tobago"               
[121] "Turks and Caicos Islands*"          "United States Virgin Islands*"     
[123] "Belize"                             "Costa Rica"                        
[125] "El Salvador"                        "Guatemala"                         
[127] "Honduras"                           "Mexico"                            
[129] "Nicaragua"                          "Panama"                            
[131] "Argentina"                          "Bolivia (Plurinational State of)"  
[133] "Brazil"                             "Chile"                             
[135] "Colombia"                           "Ecuador"                           
[137] "Falkland Islands (Malvinas)*"       "Guyana"                            
[139] "Paraguay"                           "Peru"                              
[141] "Uruguay"                            "Venezuela (Bolivarian Republic of)"
[143] "Bermuda*"                           "Canada"                            
[145] "Greenland*"                         "Saint Pierre and Miquelon*"        
[147] "Australia*"                         "New Zealand*"                      
[149] "Melanesia"                          "Papua New Guinea"                  
[151] "Solomon Islands"                    "Micronesia"                        
[153] "Guam*"                              "Kiribati"                          
[155] "Marshall Islands"                   "Micronesia (Fed. States of)"       
[157] "Northern Mariana Islands*"          "Palau"                             
[159] "Polynesia*"                         "American Samoa*"                   
[161] "Cook Islands*"                      "French Polynesia*"                 
[163] "Niue*"                              "Samoa"                             
[165] "Tuvalu"                             NA                                  </code></pre>
</div>
</div>
<p>Good–165.</p>
</section>
<section id="saving-the-clean-data" class="level1">
<h1>Saving the clean data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(data_subset_us_reshaped, <span class="st">"../data/un_migrant_stock/processed/data_subset_us_reshaped.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>